<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>openwrt常用命令</TITLE>
<META content="text/html; charset=gb2312" http-equiv=Content-Type>
<META name=GENERATOR content="MSHTML 11.00.9600.18500"></HEAD>
<BODY>
<P>openwrt常用命令</P>
<P><STRONG><FONT style="BACKGROUND-COLOR: #003300" 
color=#ff0000>1、拷贝文件到远程主机：</FONT></STRONG></P>
<P>scp -P22222 openwrt-x86-64-combined-ext4.img <A 
href="mailto:root@192.168.19.19:/root">root@192.168.19.19:/root</A></P>
<P>2、ssh连接到远程主机</P>
<P>ssh <A href="mailto:root@192.168.19.19">root@192.168.19.19</A> -p22222</P>
<P><STRONG><FONT style="BACKGROUND-COLOR: #000000" 
color=#ff0000>3、查找内容</FONT></STRONG></P>
<P>grep -rn "192.168.6.6" ./</P>
<P><STRONG><FONT style="BACKGROUND-COLOR: #003300" 
color=#ff0000>4、部署固件</FONT></STRONG></P>
<P>sudo fdisk -lu&nbsp;&nbsp; -----查看磁盘情况</P>
<P>sudo fdisk /dev/sda (sda为磁盘)&nbsp;&nbsp;&nbsp; ----磁盘分区</P>
<P>sudo mkfs -t ext4 /dev/sda&nbsp;(sda为磁盘)&nbsp;&nbsp;&nbsp;&nbsp; 
----格式化分区</P>
<P><SPAN class=kw 
style='FONT-SIZE: 12px; FONT-FAMILY: "Courier New", sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; TEXT-ALIGN: left; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; LINE-HEIGHT: 18px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal'>gunzip</SPAN><SPAN 
style='FONT-SIZE: 12px; FONT-FAMILY: "Courier New", sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FLOAT: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; TEXT-ALIGN: left; ORPHANS: 2; WIDOWS: 2; DISPLAY: inline !important; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(245,245,245); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal'> 
bin/x86/openwrt-x86-generic-combined-ext4.img.gz </SPAN></P>
<P><SPAN 
style='FONT-SIZE: 12px; FONT-FAMILY: "Courier New", sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FLOAT: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; TEXT-ALIGN: left; ORPHANS: 2; WIDOWS: 2; DISPLAY: inline !important; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(245,245,245); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal'></SPAN><SPAN class=kw 
style='FONT-SIZE: 12px; FONT-FAMILY: "Courier New", sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; TEXT-ALIGN: left; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; LINE-HEIGHT: 18px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal'>dd</SPAN><SPAN 
style='FONT-SIZE: 12px; FONT-FAMILY: "Courier New", sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FLOAT: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; TEXT-ALIGN: left; ORPHANS: 2; WIDOWS: 2; DISPLAY: inline !important; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(245,245,245); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal'> 
</SPAN><SPAN class=hljs-keyword 
style='FONT-SIZE: 12px; FONT-FAMILY: "Courier New", sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); FONT-STYLE: normal; TEXT-ALIGN: left; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; LINE-HEIGHT: 18px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal'>if</SPAN><SPAN 
style='FONT-SIZE: 12px; FONT-FAMILY: "Courier New", sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FLOAT: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; TEXT-ALIGN: left; ORPHANS: 2; WIDOWS: 2; DISPLAY: inline !important; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(245,245,245); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal'>=bin/x86/openwrt-x86-generic-combined-ext4.img 
of=/dev/sdb </SPAN><SPAN class=co 
style='FONT-SIZE: 12px; FONT-FAMILY: "Courier New", sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; TEXT-ALIGN: left; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; LINE-HEIGHT: 18px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal'><SPAN 
class=hljs-comment 
style="COLOR: green; LINE-HEIGHT: 18px">#根据自己情况选择磁盘</SPAN></SPAN></P>
<P><SPAN class=co 
style='FONT-SIZE: 12px; FONT-FAMILY: "Courier New", sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; TEXT-ALIGN: left; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; LINE-HEIGHT: 18px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal'><SPAN 
class=hljs-comment 
style="COLOR: green; LINE-HEIGHT: 18px">dd命令拆分及合并大文件</SPAN></SPAN></P><SPAN 
class=co 
style='FONT-SIZE: 12px; FONT-FAMILY: "Courier New", sans-serif; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; TEXT-ALIGN: left; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; LINE-HEIGHT: 18px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal'><SPAN 
class=hljs-comment style="COLOR: green; LINE-HEIGHT: 18px"><PRE class=bbcodeblock style="FONT-SIZE: 13px; OVERFLOW: auto; BORDER-TOP: 1px inset; HEIGHT: 312px; BORDER-RIGHT: 1px inset; WIDTH: 1574px; WORD-SPACING: 0px; BORDER-BOTTOM: 1px inset; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 3px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 3px; PADDING-LEFT: 3px; BORDER-LEFT: 1px inset; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px -99999px 0px 0px; LETTER-SPACING: normal; PADDING-RIGHT: 3px; BACKGROUND-COLOR: rgb(207,217,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal" dir=ltr><P>拆分（分五个文件，一块1024字节，count长度3G,skip起始位置）</P><P>dd if=big_file of=part1 bs=1024 count=3145728<BR>dd if=big_file of=part2 bs=1024 count=3145728 skip=3145728<BR>dd if=big_file of=part3 bs=1024 count=3145728 skip=6291456<BR>dd if=big_file of=part4 bs=1024 count=3145728 skip=9437184<BR>dd if=big_file of=part5 bs=1024 count=3145728 skip=12582912</P><P>合并</P><P><BR>dd if=part1 of=new_file bs=1024 count=3145728<BR>dd if=part2 of=new_file bs=1024 count=3145728 seek=3145728<BR>dd if=part3 of=new_file bs=1024 count=3145728 seek=6291456<BR>dd if=part4 of=new_file bs=1024 count=3145728 seek=9437184<BR>dd if=part5 of=new_file bs=1024 count=3145728 seek=12582912</P></PRE></SPAN></SPAN>
<P>查看分区情况：<FONT color=#ff0000>dmesg</FONT>、<FONT 
color=#ff0000>cat /proc/mtd</FONT></P>
<P><STRONG><FONT style= "COLOR: #ff0000">5、压缩文件</FONT></STRONG></P>
<P><FONT size=2>tar -cvf /usr/local/auto_bak/test.tar 
/usr/local/test</FONT><SPAN class=Apple-converted-space>&nbsp;</SPAN><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, Arial; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FLOAT: none; FONT-WEIGHT: normal; COLOR: rgb(102,102,102); FONT-STYLE: normal; TEXT-ALIGN: left; ORPHANS: 2; WIDOWS: 2; DISPLAY: inline !important; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal">仅打包，不压缩<SPAN 
class=Apple-converted-space>&nbsp;</SPAN></SPAN><BR 
style="FONT-SIZE: 16px; WORD-WRAP: break-word; FONT-FAMILY: 宋体, Arial; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(102,102,102); FONT-STYLE: normal; TEXT-ALIGN: left; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal"><FONT 
style="WORD-WRAP: break-word; FONT-FAMILY: 宋体, Arial; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; FONT-STYLE: normal; TEXT-ALIGN: left; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal" 
color=#000000 size=2>tar -zcvf /usr/local/auto_bak/test.tar.gz 
/usr/local/test<SPAN class=Apple-converted-space>&nbsp;</SPAN></FONT><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, Arial; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FLOAT: none; FONT-WEIGHT: normal; COLOR: rgb(102,102,102); FONT-STYLE: normal; TEXT-ALIGN: left; ORPHANS: 2; WIDOWS: 2; DISPLAY: inline !important; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal">打包后，以gzip压缩 
在参数f后面的压缩文件名是自己取的，习惯上用tar来做，如果加z参数，则以tar.gz 或tgz来代表gzip压缩过的tar file文件</SPAN></P>
<P><SPAN 
style="FONT-SIZE: 16px; FONT-FAMILY: 宋体, Arial; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FLOAT: none; FONT-WEIGHT: normal; COLOR: rgb(102,102,102); FONT-STYLE: normal; TEXT-ALIGN: left; ORPHANS: 2; WIDOWS: 2; DISPLAY: inline !important; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal"></SPAN><BR 
style="FONT-SIZE: 16px; WORD-WRAP: break-word; FONT-FAMILY: 宋体, Arial; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(102,102,102); FONT-STYLE: normal; TEXT-ALIGN: left; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal">zip 
-q -r xxx.zip /home/xxx</P>
<P><STRONG><FONT style="BACKGROUND-COLOR: #000000" 
color=#ff0000>6、解压文件</FONT></STRONG></P>
<P><SPAN 
style="FONT-SIZE: small; FONT-FAMILY: 宋体, Arial; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FLOAT: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); FONT-STYLE: normal; TEXT-ALIGN: left; ORPHANS: 2; WIDOWS: 2; DISPLAY: inline !important; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal">tar 
-zxvf /usr/local/test.tar.gz</SPAN></P>
<P>unzip xxx.zip /home/xxx</P>
<P><STRONG><FONT style="BACKGROUND-COLOR: #000000" 
color=#ff0000>7、输出启动日志</FONT></STRONG></P>
<P>dmesg &gt; a.txt</P>
<P><STRONG><FONT style="BACKGROUND-COLOR: #003300" 
color=#ff0000>8、查看日志</FONT></STRONG></P>
<P>logread</P>
<P><STRONG><FONT style="BACKGROUND-COLOR: #003300" 
color=#ff0000>9、重新生成wifi配置<FONT style="BACKGROUND-COLOR: #003300"><FONT 
color=#ff0000></FONT></STRONG></P></FONT></FONT><PRE class=code style='FONT-SIZE: 14px; OVERFLOW: auto; WORD-WRAP: normal; BORDER-TOP: rgb(204,204,204) 1px solid; FONT-FAMILY: Consolas, "Andale Mono WT", "Andale Mono", "Bitstream Vera Sans Mono", "Nimbus Mono L", Monaco, "Courier New", monospace; BORDER-RIGHT: rgb(204,204,204) 1px solid; BACKGROUND: none transparent scroll repeat 0% 0%; WHITE-SPACE: pre; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(204,204,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0.7em; DIRECTION: ltr; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0.7em; PADDING-LEFT: 1em; BORDER-LEFT: rgb(204,204,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px 0px 1.4em; LETTER-SPACING: normal; PADDING-RIGHT: 1em; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; border-radius: 2px; box-shadow: rgb(204, 204, 204) 0px 0px 0.5em inset'># rm /etc/config/wireless
# wifi detect &gt; /etc/config/wireless</PRE>
<P><STRONG><FONT style="BACKGROUND-COLOR: #003300" 
color=#ff0000>10、端口查看</FONT></STRONG></P>
<P>netstat -antp</P>
<P><FONT color=#ff0000><FONT 
style="BACKGROUND-COLOR: #003300"><STRONG>11、变量清空</STRONG> 
</FONT></FONT> </P>
<P>char haproxy_page[32768];</P>
<P>//读文件拼接到haproxy_page，之后haproxy_page就会很大了</P>
<P><STRONG><FONT 
color=#ff0000>memset(haproxy_page,'\0',sizeof(haproxy_page)); 
//逐位释放</FONT></STRONG></P>
<P><FONT color=#ff0000><FONT 
style="BACKGROUND-COLOR: #003300"><STRONG>12、变量赋值</STRONG> </FONT></FONT></P>
<P>整数可以用=，字符串变量要用strcpy</P>
<P><FONT color=#ff0000><FONT 
style="BACKGROUND-COLOR: #003300"><STRONG>13、输出到日志</STRONG> <FONT 
style="BACKGROUND-COLOR: #003300"><FONT 
color=#ff0000></FONT></FONT></P></FONT></FONT>
<P>覆盖：ls &gt; err.log</P>
<P>追加：ls &gt;&gt; err.log</P>
<P>出错也追加(<FONT color=#ff0000>2&gt;&amp;1</FONT>)：ls /abc &gt;&gt; err.log <FONT 
color=#ff0000>2&gt;&amp;1</FONT></P>
<P><STRONG>不输出日志</STRONG>：<FONT 
color=#ff0000>&amp;&gt;</FONT> <FONT color=#0000ff>/dev/null</FONT></P>
<P>控制台显示且输出到文件：</P>
<P><FONT color=#0000ff>echo "abc" | tee -a test.log&nbsp; 
</FONT><FONT color=#003366>//参数-a为追加</FONT></P>
<P><FONT color=#ff0000><FONT 
style="BACKGROUND-COLOR: #003300"><STRONG>14、修改openwrt 
root密码</STRONG>&nbsp;</P></FONT></FONT>
<P>openwrt/package/base-files/files/etc/shadow</P>
<P>密码为1：root:<FONT 
color=#ff0000>$1$j.WGb7j1$NFLl8KStQXvx44VwkJzYh0</FONT>:17119:0:99999:7:::</P>
<P><FONT style="BACKGROUND-COLOR: #003300"><FONT 
color=#ff0000><STRONG>15、shellinabox登录</STRONG>&nbsp;</FONT><FONT color=#ff0000></FONT></FONT></P>
<P>make menuconfig 开启：CONFIG_BUSYBOX_DEFAULT_LOGIN=y</P>
<P>shellinaboxd&nbsp; -t -s /:LOGIN -u root <FONT 
color=#ff0000>--css /etc/shellinabox/white-on-black.css</FONT></P>
<P><FONT color=#ff0000><FONT 
style="BACKGROUND-COLOR: #003300"><STRONG>16、ssh代理内网地址到外网</STRONG>&nbsp;<FONT 
style="BACKGROUND-COLOR: #003300"><FONT color=#ff0000></FONT></FONT><FONT 
color=#ff0000></FONT></P></FONT></FONT>
<P>ssh -nNT -R <FONT color=#ff0000>40008</FONT>:<FONT 
color=#008000>127.0.0.1:4200</FONT> <A 
href="mailto:fanqie@120.27.146.5">fanqie@120.27.146.5</A> -p<FONT 
color=#3366ff>50022</FONT></P>
<P>将内网127.0.0.1:4200映射到120.27.146.5:10000，外网的50022端口接收ssh命令</P>
<P><FONT color=#ff0000><FONT 
style="BACKGROUND-COLOR: #003300"><STRONG>17、查找进程pid</STRONG>&nbsp;<FONT 
style="BACKGROUND-COLOR: #003300"><FONT color=#ff0000></FONT></FONT><FONT 
style="BACKGROUND-COLOR: #003300"><FONT color=#ff0000></FONT></FONT></P></FONT></FONT>
<P>[ $(ps | grep -c "ssh -nNT -R 10000:127.0.0.1:22222 <A 
href="mailto:fanqie@120.27.146.5">fanqie@120.27.146.5</A> -p50022") -gt 1 ] 
&amp;&amp; kill -9 `ps | grep "ssh -nNT -R 10000:127.0.0.1:22222 <A 
href="mailto:fanqie@120.27.146.5">fanqie@120.27.146.5</A> -p50022" | grep -v 
grep | awk '{print $1}' | sed -n \"1p\"`</P>
<P><FONT style="BACKGROUND-COLOR: #003300"><FONT 
color=#ff0000><STRONG>18、抓数据包 </STRONG></FONT></FONT></P>
<P>tcpdump -i eth1 -w /tmp/ssl4.cap&nbsp; //抓eth1数据写入ssl4.cap</P>
<P><STRONG><FONT style="BACKGROUND-COLOR: #003300" 
color=#ff0000>19、数据请求/文件下载 </FONT></STRONG></P>
<P>wget -T 12000 -t 0 -c -O /tmp/abc.bin <A 
href="https://admin.fanqie.net/xx.bin">https://admin.fanqie.net/xx.bin</A></P>
<P>curl --tlsv1.2 --capath "/etc/ssl/certs" --connect-timeout 12000 -s 
-o&nbsp;/tmp/abc.bin <A 
href="https://admin.fanqie.net/xx.bin">https://admin.fanqie.net/xx.bin</A></P>
<P><STRONG><FONT style="BACKGROUND-COLOR: #003300" 
color=#ff0000>20、去除重复行 </FONT></STRONG></P>
<P>cat /proc/net/arp | grep "br-lan" | grep -v "0x0" | awk '{print $4}' | sort | 
awk '!a[$0]++'</P>
<P><FONT color=#ff0000><FONT 
style="BACKGROUND-COLOR: #003300"><STRONG>21、检查程序</STRONG><SPAN 
style="FONT-SIZE: 14px; FONT-FAMILY: Arial; LINE-HEIGHT: 26px"><STRONG>所需要得动态链接库（so）</STRONG></SPAN><STRONG> 
</STRONG></FONT></FONT></P>
<P>ldd curl</P>
<P>libcurl.so.4 =&gt; /usr/lib/libcurl.so.4 (0x775c6000)<BR>libssl.so.1.0.0 
=&gt; /usr/lib/libssl.so.1.0.0 (0x77568000)<BR>libcrypto.so.1.0.0 =&gt; 
/usr/lib/libcrypto.so.1.0.0 (0x77401000)<BR>libgcc_s.so.1 =&gt; 
/lib/libgcc_s.so.1 (0x773dd000)<BR>libc.so.0 =&gt; /lib/libc.so.0 
(0x77370000)<BR>libdl.so.0 =&gt; /lib/libdl.so.0 (0x7735c000)<BR>ld-uClibc.so.0 
=&gt; /lib/ld-uClibc.so.0 (0x775f8000)</P>
<P>摘自openwrt升级脚本common.sh</P>
<P>[ -x /usr/bin/ldd ] || ldd() { LD_TRACE_LOADED_OBJECTS=1 $*; }<BR>libs() { 
ldd $* 2&gt;/dev/null | sed -r 's/(.* =&gt; )?(.*) .*/\2/'; }</P>
<P>files="$src $(libs $src)"</P>
<P><STRONG><FONT style="BACKGROUND-COLOR: #003300" 
color=#ff0000>22、查看文件大小 
<FONT style="BACKGROUND-COLOR: #003300"><FONT 
color=#ff0000></FONT></STRONG></P></FONT></FONT>
<P>ls -lht</P>
<P><STRONG><FONT style="BACKGROUND-COLOR: #003300" 
color=#ff0000>23、获取&nbsp;wan 口 IP </FONT></STRONG><FONT 
style="BACKGROUND-COLOR: #003300"><FONT color=#ff0000></FONT></FONT></P>
<P>ubus call network.interface.wan status | grep \"address\" | grep -oE 
"[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}"</P>
<P><STRONG><FONT style="BACKGROUND-COLOR: #003300" 
color=#ff0000>24、清理内存 
<FONT style="BACKGROUND-COLOR: #003300"><FONT 
color=#ff0000></FONT></STRONG></P></FONT></FONT>
<P>echo 3 &gt; /proc/sys/vm/drop_caches</P>
<P><STRONG><FONT style="BACKGROUND-COLOR: #003300" 
color=#ff0000>25、分区挂载 </FONT></STRONG><FONT 
style="BACKGROUND-COLOR: #003300"><FONT color=#ff0000></FONT></FONT></P>
<P>以可写方式重新挂载根：mount -o remount rw /</P>
<P>以只读方式挂载/rom：mount -o r /rom</P>
<P>&nbsp;</P>
<P><STRONG><FONT size=4>编译：</FONT></STRONG></P>
<P>make V=s -j6 6为进程数，如果报错改为1就可以跟踪到最先报错的位置，方便排查</P><PRE class=wiki style="FONT-SIZE: 13px; OVERFLOW: auto; BORDER-TOP: rgb(215,215,215) 1px solid; BORDER-RIGHT: rgb(215,215,215) 1px solid; FONT-VARIANT: normal; BACKGROUND: rgb(247,247,247); WORD-SPACING: 0px; BORDER-BOTTOM: rgb(215,215,215) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0.25em; FONT-STYLE: normal; PADDING-TOP: 0.25em; PADDING-LEFT: 0.25em; BORDER-LEFT: rgb(215,215,215) 1px solid; WIDOWS: 1; MARGIN: 1em 1.75em; LETTER-SPACING: normal; LINE-HEIGHT: normal; PADDING-RIGHT: 0.25em; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; border-radius: 0.3em; box-shadow: rgb(238, 238, 238) 0px 0px 1em">make tools/{clean,compile,install}&nbsp; 清空、编译、安装tools下的工具包（编译失败且提示tools下包报错时，可执行此操作）</PRE>
<P>只编译指定包：</P>
<P>如fqrouterd.c</P>
<P>make package/fqrouterd/compile V=s</P>
<P>编译完成在openwrt/staging_dir/target-mips_34kc_uClibc-0.9.33.2/root-ar71xx/usr/bin 
目录下可找到编译好的 fqrouterd 文件，替换固件中的同名文件即可</P>
<P><STRONG><FONT size=4></FONT></STRONG>&nbsp;</P>
<P><STRONG><FONT size=4>升级固件：</FONT></STRONG></P>
<P>sysupgrade -n xxx.bin/.img&nbsp;&nbsp;&nbsp; ----n是不保留配置，-c是保留配置</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>ubuntu 进入命令行：</P>
<P><STRONG><FONT size=7>ctrl + alt + f2~f6</FONT></STRONG></P>
<P>返回主界面：</P>
<P><FONT size=7>ctrl + alt + f7</FONT></P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>dos跟踪访问连接ip</P>
<P>tracert -d <A href="http://www.jd.com"><FONT color=#000000>www.jd.com</FONT></A></P>
<P>dos查看域名ip</P>
<P>nslookup --&gt; 输入域名</P>
<P>linux跟踪访问连接ip</P>
<P>traceroute -d <A href="http://www.jd.com"><FONT 
color=#000000>www.jd.com</FONT></A></P></BODY></HTML>
