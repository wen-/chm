<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>nginx备机配置</TITLE>
<META content="text/html; charset=gb2312" http-equiv=Content-Type>
<META name=GENERATOR content="MSHTML 8.00.6001.23588">
</HEAD>
<BODY>
<P>nginx备机配置</P>
<DIV 
style="BACKGROUND-IMAGE: url(http://www.cnblogs.com/skins/BlackSun/images/Topic.gif); TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); MARGIN-TOP: 6px; TEXT-INDENT: 0px; PADDING-LEFT: 15px; BACKGROUND-REPEAT: no-repeat; FONT: bolder medium Verdana, Arial, Geneva, Helvetica, sans-serif; WHITE-SPACE: normal; MARGIN-BOTTOM: 0px; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; -webkit-text-stroke-width: 0px" 
class=postTitle><A style="COLOR: rgb(0,0,0); TEXT-DECORATION: none" 
id=cb_post_title_url 
href="http://www.cnblogs.com/wangjiafang/archive/2013/01/10/2854401.html">【原创】学习日记5：nginx负载均衡（三）2012.01.10 
nginx+keepalievd，实现负载均衡和故障点切换。keepalived双机热备。</A></DIV>
<DIV 
style="PADDING-BOTTOM: 2px; TEXT-TRANSFORM: none; BACKGROUND-COLOR: rgb(255,255,255); MARGIN-TOP: 0px; TEXT-INDENT: 0px; PADDING-LEFT: 15px; PADDING-RIGHT: 10px; FONT: 13px/1.5 verdana, sans-serif; WHITE-SPACE: normal; LETTER-SPACING: normal; COLOR: rgb(0,0,0); WORD-SPACING: 0px; PADDING-TOP: 2px; -webkit-text-stroke-width: 0px; font-stretch: normal" 
class=postText>
<DIV style="MARGIN-BOTTOM: 20px" id=cnblogs_post_body>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">接上文 &nbsp;<A 
style="COLOR: rgb(68,68,68); TEXT-DECORATION: none" 
id=homepage1_HomePageDays_DaysList_DayItem_0_DayList_0_TitleUrl_0 
class=postTitle2 
href="http://www.cnblogs.com/wangjiafang/archive/2013/01/08/2851026.html">学习日记4：nginx负载均衡（二）2012.01.08</A></P>
<BLOCKQUOTE 
style="BORDER-BOTTOM: rgb(239,239,239) 2px solid; BORDER-LEFT: rgb(239,239,239) 2px solid; PADDING-BOTTOM: 5px; FONT-STYLE: italic; MARGIN-TOP: 10px; PADDING-LEFT: 10px; PADDING-RIGHT: 10px; MARGIN-BOTTOM: 10px; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(51,51,51); MARGIN-LEFT: 25px; BORDER-TOP: rgb(239,239,239) 2px solid; BORDER-RIGHT: rgb(239,239,239) 2px solid; PADDING-TOP: 5px">
  <P style="TEXT-INDENT: 0px; MARGIN: 10px auto"><SPAN>......</SPAN></P>
  <P style="TEXT-INDENT: 0px; MARGIN: 10px auto"><SPAN>到此，整体工作还差一个备用nginx 
  proxy，其中涉及到keepalived，做心跳。</SPAN></P></BLOCKQUOTE>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto"><SPAN>　　　</SPAN></P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">&nbsp;</P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto"><IMG 
style="BORDER-BOTTOM: 0px; BORDER-LEFT: 0px; BORDER-TOP: 0px; BORDER-RIGHT: 0px" 
alt="" 
src="http://images.cnitblog.com/blog/371387/201301/10113149-de1fff914f3c43ee9ffbda7b89297603.png"></P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto"><STRONG><SPAN 
style="COLOR: rgb(255,0,0)">黄线以上做完了。</SPAN></STRONG></P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">&nbsp;</P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">&nbsp;</P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto"><SPAN>本次主要做的是1加一台从nginx_proxy 
，暂且命令为front2（为从）。之前的nginx_proxy命令为front（为主）</SPAN></P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">&nbsp;</P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">1 在主nginx上配置keepalived。</P>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important">cd /usr/local/src/
<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">wget</SPAN> http:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,128,0); FONT-SIZE: 12px !important">//</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,128,0); FONT-SIZE: 12px !important">keepalived.org/software/keepalived-1.2.7.tar.gz</SPAN>

<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">tar</SPAN> -xzvf keepalived-<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1.2</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">7</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">tar</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">.gz
cd keepalived</SPAN>-<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1.2</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">7</SPAN>/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
.</SPAN>/configure --prefix=/usr/local/keepalived</PRE></DIV>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">这时候会报错的！</P>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important"><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">configure: error: 
  </SPAN>!!! OpenSSL is not properly installed on your system. !!!
  !!! Can not include OpenSSL headers files.            !!!</PRE></DIV>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">缺少gcc，安装下面扩展</P>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important"><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">yum</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">install</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">gcc</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">gcc</SPAN>-c++ autoconf automake</PRE></DIV>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">继续编译，下面还会报错，类似这样的错误。</P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">&nbsp;</P>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important"><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">make</SPAN>: *** No targets specified and no makefile found.  Stop.</PRE></DIV>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important">configure: error: ! OpenSSL is not properly installed on your system. configure: error: !</PRE></DIV>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">&nbsp;</P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">&nbsp;对此，我们安装以下扩展即可解决。</P>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important"><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">yum</SPAN> -y <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">install</SPAN> openssl-devel</PRE></DIV>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important"><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">yum</SPAN> -y <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">install</SPAN> popt-devel</PRE></DIV>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">&nbsp;</P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto"><SPAN>在编译</SPAN></P>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important">./configure --prefix=/usr/local/keepalived</PRE></DIV>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">&nbsp;</P>
<P 
style="TEXT-INDENT: 0px; MARGIN: 10px auto"><SPAN>这时候，会出现下面的结果，这个结果就表明是ok的。到此你的keepalived安装是成功的！</SPAN></P>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important"><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">Keepalived configuration
</SPAN>------------------------<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
Keepalived version       : </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1.2</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">7</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
Compiler                 : </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">gcc</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
Compiler flags           : </SPAN>-g -<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">O2
Extra Lib                : </SPAN>-lpopt -lssl -<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">lcrypto 
Use IPVS Framework       : Yes
IPVS </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">sync</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> daemon support : Yes
IPVS use libnl           : No
Use VRRP Framework       : Yes
Use VRRP VMAC            : Yes
SNMP support             : No
Use Debug flags          : No</SPAN></PRE>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 
src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">&nbsp;</P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto"><SPAN>继续下面的操作</SPAN></P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">&nbsp;</P>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important"><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">make</SPAN>
<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">make</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">install</SPAN>
<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">cp</SPAN> /usr/local/keepalived/sbin/keepalived /usr/sbin/
<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">cp</SPAN> /usr/local/keepalived/etc/sysconfig/keepalived /etc/sysconfig/
<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">cp</SPAN> /usr/local/keepalived/etc/rc.d/init.d/keepalived /etc/init.d/
<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">mkdir</SPAN> /etc/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">keepalived
cd </SPAN>/etc/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">keepalived
vim keepalived.conf</SPAN></PRE>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 
src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">&nbsp;</P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto"><SPAN>　</SPAN></P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">keepalived.conf配置文件比较重要</P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">front1 ：主nginx的配置文件如下：</P>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important">! Configuration File <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">for</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> keepalived
global_defs {
   router_id LVS_01
}
vrrp_instance VI_1 {
    state MASTER  #master 主nginx
    interface eth1
    virtual_router_id </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">51</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
    mcast_src_ip </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.133 #本机ip地址也即主nginx地址</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
    priority </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">100</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
    advert_int </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
    authentication {
        auth_type PASS
        auth_pass </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1111</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
    }
    virtual_ipaddress {
        </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.128</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> #vip 虚拟出来的ip地址 要求在内网中未被使用
    }
}</SPAN></PRE>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 
src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">&nbsp;</P>
<P 
style="TEXT-INDENT: 0px; MARGIN: 10px auto">到此，主nginx配置完成。同样的操作，在从nginx上也配置一遍。</P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">不过从nginx的配置文件如下：</P>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important">[root@localhost nginx]# vim /etc/keepalived/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">keepalived.conf 

</SPAN>! Configuration File <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">for</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> keepalived
global_defs {
   router_id LVS_01
}
vrrp_instance VI_1 {
    state BACKUP #slave 
    interface eth2
    virtual_router_id </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">51</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
    mcast_src_ip </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.137 #slave ip</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
    priority </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">80</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
    advert_int </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
    authentication {
        auth_type PASS
        auth_pass </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1111</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
    }
    virtual_ipaddress {
        </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.128</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> #vip
    }
}</SPAN></PRE>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 
src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">&nbsp;</P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">重启两边的keepalived服务：</P>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important"><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">[root@localhost conf.d]# service keepalived restart
Stopping keepalived:                                       [FAILED]
Starting keepalived:                                       [  OK  ]</SPAN></PRE></DIV>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">主nginx上，用</P>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important"><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">[root@localhost conf.d]# ip a
</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1</SPAN>: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16436</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> qdisc noqueue state UNKNOWN 
    link</SPAN>/loopback <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN> brd <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
    inet </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">127.0</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">0.1</SPAN>/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">8</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> scope host lo
    inet6 ::</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1</SPAN>/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">128</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> scope host 
       valid_lft forever preferred_lft forever
</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">2</SPAN>: eth1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1500</SPAN> qdisc pfifo_fast state UP qlen <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1000</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
    link</SPAN>/ether <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:0c:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">29</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">20</SPAN>:e9:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">20</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> brd ff:ff:ff:ff:ff:ff
    inet </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.133</SPAN>/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">24</SPAN> brd <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.255</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> scope global eth1
    inet </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.128</SPAN>/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">32</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> scope global eth1
    inet6 fe80::20c:29ff:fe20:e920</SPAN>/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">64</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> scope link 
       valid_lft forever preferred_lft forever</SPAN></PRE>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 
src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">&nbsp;到此，我们的vip算是真正的绑定上了。</P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">查看keepalived的日志：</P>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important">root@localhost conf.d]# <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">tail</SPAN> -f /var/log/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">messages 
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">18</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">53</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">06</SPAN> localhost Keepalived_healthcheckers[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">3355</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">]: Using LinkWatch kernel netlink reflector...
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">18</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">53</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">06</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">3356</SPAN>]: Configuration is using : <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">34824</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> Bytes
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">18</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">53</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">06</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">3356</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">]: Using LinkWatch kernel netlink reflector...
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">18</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">53</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">06</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">3356</SPAN>]: VRRP sockpool: [ifindex(<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">2</SPAN>), proto(<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">112</SPAN>), fd(<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">11</SPAN>,<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">12</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">)]
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">18</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">53</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">06</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">3356</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">]: VRRP_Instance(VI_1) Transition to MASTER STATE
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">18</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">53</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">07</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">3356</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">]: VRRP_Instance(VI_1) Entering MASTER STATE
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">18</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">53</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">07</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">3356</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">]: VRRP_Instance(VI_1) setting protocol VIPs.
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">18</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">53</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">07</SPAN> localhost avahi-daemon[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1765</SPAN>]: Registering new address record <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">for</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.128</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> on eth1.IPv4.
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">18</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">53</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">07</SPAN> localhost Keepalived_healthcheckers[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">3355</SPAN>]: Netlink reflector reports IP <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.128</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> added
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">18</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">53</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">07</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">3356</SPAN>]: VRRP_Instance(VI_1) Sending gratuitous ARPs on eth1 <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">for</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.128</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">18</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">53</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">12</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">3356</SPAN>]: VRRP_Instance(VI_1) Sending gratuitous ARPs on eth1 <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">for</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.128</SPAN></PRE>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 
src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">从nginx上，同样</P>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important"><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">[root@localhost nginx]# ip a
</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1</SPAN>: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16436</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> qdisc noqueue state UNKNOWN 
    link</SPAN>/loopback <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN> brd <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
    inet </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">127.0</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">0.1</SPAN>/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">8</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> scope host lo
    inet6 ::</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1</SPAN>/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">128</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> scope host 
       valid_lft forever preferred_lft forever
</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">2</SPAN>: eth2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1500</SPAN> qdisc pfifo_fast state UP qlen <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1000</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
    link</SPAN>/ether <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:0c:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">29</SPAN>:a7:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">81</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">:c7 brd ff:ff:ff:ff:ff:ff
    inet </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.137</SPAN>/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">24</SPAN> brd <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.255</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> scope global eth2
    inet6 fe80::20c:29ff:fea7:81c7</SPAN>/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">64</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> scope link 
       valid_lft forever preferred_lft forever</SPAN></PRE>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 
src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">我们发现并没有绑定vip 128</P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">同时；</P>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important">[root@localhost nginx]# <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">tail</SPAN> -f /var/log/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">messages 
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_healthcheckers[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22420</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">]: Registering Kernel netlink reflector
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_healthcheckers[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22420</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">]: Registering Kernel netlink command channel
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22421</SPAN>]: Opening <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">file</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,0); FONT-SIZE: 12px !important">'</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,0); FONT-SIZE: 12px !important">/etc/keepalived/keepalived.conf</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,0); FONT-SIZE: 12px !important">'</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">.
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_healthcheckers[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22420</SPAN>]: Opening <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">file</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,0); FONT-SIZE: 12px !important">'</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,0); FONT-SIZE: 12px !important">/etc/keepalived/keepalived.conf</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,0); FONT-SIZE: 12px !important">'</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">.
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22421</SPAN>]: Configuration is using : <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">34822</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> Bytes
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_healthcheckers[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22420</SPAN>]: Configuration is using : <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">4821</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> Bytes
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22421</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">]: Using LinkWatch kernel netlink reflector...
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22421</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">]: VRRP_Instance(VI_1) Entering BACKUP STATE
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22421</SPAN>]: VRRP sockpool: [ifindex(<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">2</SPAN>), proto(<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">112</SPAN>), fd(<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">11</SPAN>,<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">12</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">)]
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_healthcheckers[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22420</SPAN>]: Using LinkWatch kernel netlink reflector...</PRE>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 
src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">&nbsp;</P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">貌似从nginx似乎出了什么问题，先不着急。</P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">这时候我们停止掉主nginx的服务，再看看效果怎么样！</P>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important"><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">killall</SPAN> nginx</PRE></DIV>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">再观察从nginx的状态变化</P>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important">[root@localhost nginx]# <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">tail</SPAN> -f /var/log/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">messages 
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_healthcheckers[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22420</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">]: Registering Kernel netlink reflector
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_healthcheckers[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22420</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">]: Registering Kernel netlink command channel
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22421</SPAN>]: Opening <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">file</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,0); FONT-SIZE: 12px !important">'</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,0); FONT-SIZE: 12px !important">/etc/keepalived/keepalived.conf</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,0); FONT-SIZE: 12px !important">'</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">.
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_healthcheckers[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22420</SPAN>]: Opening <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">file</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,0); FONT-SIZE: 12px !important">'</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,0); FONT-SIZE: 12px !important">/etc/keepalived/keepalived.conf</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,0); FONT-SIZE: 12px !important">'</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">.
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22421</SPAN>]: Configuration is using : <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">34822</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> Bytes
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_healthcheckers[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22420</SPAN>]: Configuration is using : <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">4821</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> Bytes
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22421</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">]: Using LinkWatch kernel netlink reflector...
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22421</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">]: VRRP_Instance(VI_1) Entering BACKUP STATE
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22421</SPAN>]: VRRP sockpool: [ifindex(<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">2</SPAN>), proto(<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">112</SPAN>), fd(<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">11</SPAN>,<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">12</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">)]
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">25</SPAN> localhost Keepalived_healthcheckers[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22420</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">]: Using LinkWatch kernel netlink reflector...
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">17</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">33</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22421</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">]: VRRP_Instance(VI_1) Transition to MASTER STATE
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">17</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">34</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22421</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">]: VRRP_Instance(VI_1) Entering MASTER STATE
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">17</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">34</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22421</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">]: VRRP_Instance(VI_1) setting protocol VIPs.
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">17</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">34</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22421</SPAN>]: VRRP_Instance(VI_1) Sending gratuitous ARPs on eth2 <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">for</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.128</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">17</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">34</SPAN> localhost avahi-daemon[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1810</SPAN>]: Registering new address record <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">for</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.128</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> on eth2.IPv4.
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">17</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">34</SPAN> localhost Keepalived_healthcheckers[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22420</SPAN>]: Netlink reflector reports IP <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.128</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> added
Jan  </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">9</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">19</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">17</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">39</SPAN> localhost Keepalived_vrrp[<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">22421</SPAN>]: VRRP_Instance(VI_1) Sending gratuitous ARPs on eth2 <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">for</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.128</SPAN></PRE>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 
src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">从第33秒后发现，备用nginx已经转为master状态。</P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">再看</P>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important"><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">[root@localhost nginx]# ip a
</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1</SPAN>: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">16436</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> qdisc noqueue state UNKNOWN 
    link</SPAN>/loopback <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN> brd <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
    inet </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">127.0</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">0.1</SPAN>/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">8</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> scope host lo
    inet6 ::</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1</SPAN>/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">128</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> scope host 
       valid_lft forever preferred_lft forever
</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">2</SPAN>: eth2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1500</SPAN> qdisc pfifo_fast state UP qlen <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">1000</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
    link</SPAN>/ether <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">00</SPAN>:0c:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">29</SPAN>:a7:<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">81</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">:c7 brd ff:ff:ff:ff:ff:ff
    inet </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.137</SPAN>/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">24</SPAN> brd <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.255</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> scope global eth2
    inet </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">192.168</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">65.128</SPAN>/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">32</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> scope global eth2
    inet6 fe80::20c:29ff:fea7:81c7</SPAN>/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">64</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> scope link 
       valid_lft forever preferred_lft forever</SPAN></PRE>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 
src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">发现没有？vip飘过来了！</P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">&nbsp;</P>
<BLOCKQUOTE 
style="BORDER-BOTTOM: rgb(239,239,239) 2px solid; BORDER-LEFT: rgb(239,239,239) 2px solid; PADDING-BOTTOM: 5px; FONT-STYLE: italic; MARGIN-TOP: 10px; PADDING-LEFT: 10px; PADDING-RIGHT: 10px; MARGIN-BOTTOM: 10px; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(51,51,51); MARGIN-LEFT: 25px; BORDER-TOP: rgb(239,239,239) 2px solid; BORDER-RIGHT: rgb(239,239,239) 2px solid; PADDING-TOP: 5px">
  <P 
  style="TEXT-INDENT: 0px; MARGIN: 10px auto">针对Keepalived的不足,用check_nginx.sh来监控nginx进程，实现真正意义上的负载均衡高可用.<BR>此脚本思路其实也很简单，即放置在后台一直监控nginx进程；如进程消失，尝试重启nginx，<BR>如是失败则立即停掉本机的keepalived服务，让另一台负载均衡器接手.</P></BLOCKQUOTE>
<DIV 
style="BORDER-BOTTOM: rgb(204,204,204) 1px solid; BORDER-LEFT: rgb(204,204,204) 1px solid; PADDING-BOTTOM: 5px; BACKGROUND-COLOR: rgb(245,245,245); MARGIN: 5px 0px; PADDING-LEFT: 5px; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important; OVERFLOW: auto; BORDER-TOP: rgb(204,204,204) 1px solid; BORDER-RIGHT: rgb(204,204,204) 1px solid; PADDING-TOP: 5px" 
class=cnblogs_code>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV><PRE style="MARGIN-TOP: 0px; FONT-FAMILY: 'Courier New' !important; WORD-WRAP: break-word; WHITE-SPACE: pre-wrap; MARGIN-BOTTOM: 0px; FONT-SIZE: 12px !important"><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">vi</SPAN> /shell/nginx_pid.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">sh</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
###################################################
#</SPAN>!/bin/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">bash
</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">while</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> :
    </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">do</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
    nginxpid</SPAN>=`<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">ps</SPAN> -C nginx --no-header | <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">wc</SPAN> -<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">l`

 </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">if</SPAN> [ $nginxpid -eq <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">0</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> ]
   </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">then</SPAN>
   /usr/local/nginx-<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">0.8</SPAN>.<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">53</SPAN>/sbin/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">nginx
   </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">sleep</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">5</SPAN>
 <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">if</SPAN> [ $nginxpid -eq <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">0</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important"> ]
    </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">then</SPAN>
    /etc/init.d/<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">keepalived stop
    </SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">fi</SPAN>
    <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">fi</SPAN>
    <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">sleep</SPAN> <SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(128,0,128); FONT-SIZE: 12px !important">5</SPAN>
<SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,255); FONT-SIZE: 12px !important">done</SPAN><SPAN style="LINE-HEIGHT: 1.5 !important; FONT-FAMILY: 'Courier New' !important; COLOR: rgb(0,0,0); FONT-SIZE: 12px !important">
###################################################</SPAN></PRE>
<DIV style="BACKGROUND-COLOR: rgb(245,245,245); MARGIN-TOP: 5px" 
class=cnblogs_code_toolbar><SPAN 
style="LINE-HEIGHT: 1.5 !important; PADDING-RIGHT: 5px; FONT-FAMILY: 'Courier New' !important; FONT-SIZE: 12px !important" 
class=cnblogs_code_copy><A 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; COLOR: rgb(68,68,68); BORDER-TOP: medium none; BORDER-RIGHT: medium none; TEXT-DECORATION: none" 
title=复制代码 onclick=copyCnblogsCode(this) href="javascript:void(0);"><IMG 
style="BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; BACKGROUND-COLOR: rgb(245,245,245) !important; BORDER-TOP: medium none; BORDER-RIGHT: medium none" 
alt=复制代码 
src="http://common.cnblogs.com/images/copycode.gif"></A></SPAN></DIV></DIV>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">&nbsp;</P>
<P style="TEXT-INDENT: 0px; MARGIN: 10px auto">&nbsp;</P>
<P 
style="TEXT-INDENT: 0px; MARGIN: 10px auto">我们仍然可以继续访问我们的站点。至此。故障点切换宣告结束。</P></DIV></DIV></BODY></HTML>