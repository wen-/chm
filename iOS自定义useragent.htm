<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=gb2312">
<META name="GENERATOR" content="QuickCHM">
<TITLE>iOS自定义useragent</TITLE>
</HEAD>
<BODY>
<P>iOS自定义useragent</P>
<P>修改AppDelegate.m文件</P>
<P>#import "AppDelegate.h"</P>
<P>#import &lt;React/RCTBundleURLProvider.h&gt;<BR>#import 
&lt;React/RCTRootView.h&gt;<BR>#import "SplashScreen.h"<BR>#import 
"BaiduMobStat.h"</P>
<P>@implementation AppDelegate</P>
<P>- (BOOL)application:(UIApplication *)application 
didFinishLaunchingWithOptions:(NSDictionary *)launchOptions<BR>{</P>
<P>//获取原useragent<BR>&nbsp; <FONT color=#ff0000>UIWebView* webView = [[UIWebView 
alloc] initWithFrame:CGRectZero];<BR>&nbsp; NSString *oldAgent =    [webView 
stringByEvaluatingJavaScriptFromString:@"navigator.userAgent"];</FONT></P>
<P><FONT color=#ff0000><FONT 
color=#000000>//组合新useragent&nbsp;加入“baibaod.com-”</FONT><BR>&nbsp; NSString 
*newAgent = [@"baibaod.com-" stringByAppendingString:oldAgent];<BR>&nbsp; 
NSDictionary *dictionary = [[NSDictionary alloc] 
initWithObjectsAndKeys:newAgent, @"UserAgent", nil];<BR>&nbsp; [[NSUserDefaults 
standardUserDefaults] registerDefaults:dictionary];</FONT></P>
<P><FONT color=#ff0000></FONT>&nbsp;</P>
<P>php获取：</P><PRE style="FONT-SIZE: 10.5pt; FONT-FAMILY: 'Source Code Pro Semibold'; COLOR: #ffffff; BACKGROUND-COLOR: #282525"><FONT color=#000000><SPAN style="FONT-WEIGHT: bold; COLOR: #88e3c7">echo </SPAN><SPAN style="COLOR: #1aa642">$_SERVER</SPAN>[<SPAN style="FONT-WEIGHT: bold; COLOR: #63b5e3">'HTTP_USER_AGENT'</SPAN>];<SPAN style="FONT-WEIGHT: bold; COLOR: #88e3c7">die</SPAN>;</FONT><FONT color=#ffffff></PRE></FONT>
</BODY>
</HTML>
