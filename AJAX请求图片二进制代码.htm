<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=gb2312">
<META name="GENERATOR" content="QuickCHM">
<TITLE>AJAX请求图片二进制代码</TITLE>
</HEAD>
<BODY>
<P>AJAX请求图片二进制代码</P><PRE style="FONT-SIZE: 10.5pt; FONT-FAMILY: '宋体'; COLOR: #ffffff; BACKGROUND-COLOR: #282525"><FONT size=4><FONT><SPAN style="FONT-WEIGHT: bold; COLOR: #99ffdd">var </SPAN><SPAN style="FONT-WEIGHT: bold; COLOR: #99ff99">http </SPAN>= <SPAN style="FONT-WEIGHT: bold; COLOR: #99ffdd">new </SPAN>XMLHttpRequest();<BR><SPAN style="FONT-WEIGHT: bold; COLOR: #99ff99">http</SPAN>.<SPAN style="COLOR: #95c995; FONT-STYLE: italic">onload </SPAN>= <SPAN style="FONT-WEIGHT: bold; COLOR: #99ffdd">function</SPAN>() {<BR>    <SPAN style="FONT-WEIGHT: bold; COLOR: #99ffdd">if </SPAN>(<SPAN style="FONT-WEIGHT: bold; COLOR: #99ffdd">this</SPAN>.<SPAN style="FONT-WEIGHT: bold">status </SPAN>== <SPAN style="COLOR: #6666d9">200 </SPAN>|| <SPAN style="FONT-WEIGHT: bold; COLOR: #99ffdd">this</SPAN>.<SPAN style="FONT-WEIGHT: bold">status </SPAN>=== <SPAN style="COLOR: #6666d9">0</SPAN>) {<BR>        handleBinaryFile(<SPAN style="FONT-WEIGHT: bold; COLOR: #99ff99">http</SPAN>.<SPAN style="FONT-WEIGHT: bold">response</SPAN>);//http.response 返回的二进制编码</FONT></FONT><FONT size=4><FONT><BR>    } <SPAN style="FONT-WEIGHT: bold; COLOR: #99ffdd">else </SPAN>{<BR>        <SPAN style="FONT-WEIGHT: bold; COLOR: #99ffdd">throw </SPAN><SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">"Could not load image"</SPAN>;<BR>    }<BR>    <SPAN style="FONT-WEIGHT: bold; COLOR: #99ff99">http </SPAN>= <SPAN style="FONT-WEIGHT: bold; COLOR: #99ffdd">null</SPAN>;<BR>};<BR><SPAN style="FONT-WEIGHT: bold; COLOR: #99ff99">http</SPAN>.<SPAN style="COLOR: #95c995; FONT-STYLE: italic">open</SPAN>(<SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">"GET"</SPAN>, <SPAN style="COLOR: #99ff99">img</SPAN>.<SPAN style="FONT-WEIGHT: bold">src</SPAN>, <SPAN style="FONT-WEIGHT: bold; COLOR: #99ffdd">true</SPAN>);<BR><SPAN style="FONT-WEIGHT: bold; COLOR: #99ff99">http</SPAN>.<SPAN style="FONT-WEIGHT: bold">responseType </SPAN>= <SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">"arraybuffer"</SPAN>; //二进制缓冲区<BR><SPAN style="FONT-WEIGHT: bold; COLOR: #99ff99">http</SPAN>.<SPAN style="COLOR: #95c995; FONT-STYLE: italic">send</SPAN>(<SPAN style="FONT-WEIGHT: bold; COLOR: #99ffdd">null</SPAN>);</FONT></FONT></PRE>
</BODY>
</HTML>
