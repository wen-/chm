<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=gb2312">
<META name="GENERATOR" content="QuickCHM">
<TITLE>mysql 批量更新与批量更新多条记录的不同值实现方法</TITLE>
</HEAD>
<BODY>
<P>mysql 批量更新与批量更新多条记录的不同值实现方法</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>批量更新</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>mysql更新语句很简单，更新一条数据的某个字段，一般这样写：</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<DIV class=codetitle 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 640px; BACKGROUND: rgb(242,246,251); WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 3px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 3px auto 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><SPAN 
style="FONT-SIZE: 14px; FLOAT: right; LINE-HEIGHT: 25px"><A 
onclick="doCopy('code30735')" id=copybut30735 class=copybut 
style="CURSOR: pointer; TEXT-DECORATION: none; COLOR: rgb(51,51,51)" 
data="30735"><U>复制代码</U></A></SPAN>代码如下:</DIV>
<DIV id=code30735 class=codebody 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 638px; BACKGROUND: rgb(221,237,251); WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(0,153,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 5px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px auto 3px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><BR>UPDATE 
mytable SET myfield = 'value' WHERE other_field = 'other_value';<BR></DIV>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>如果更新同一字段为同一个值，mysql也很简单，修改下where即可：</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<DIV class=codetitle 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 640px; BACKGROUND: rgb(242,246,251); WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 3px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 3px auto 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><SPAN 
style="FONT-SIZE: 14px; FLOAT: right; LINE-HEIGHT: 25px"><A 
onclick="doCopy('code22449')" id=copybut22449 class=copybut 
style="CURSOR: pointer; TEXT-DECORATION: none; COLOR: rgb(51,51,51)" 
data="22449"><U>复制代码</U></A></SPAN>代码如下:</DIV>
<DIV id=code22449 class=codebody 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 638px; BACKGROUND: rgb(221,237,251); WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(0,153,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 5px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px auto 3px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><BR>&nbsp;UPDATE 
mytable SET myfield = 'value' WHERE other_field in 
('other_values');<BR>&nbsp;</DIV>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>这里注意 
‘other_values' 是一个逗号（，）分隔的字符串，如：1,2,3</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>那如果更新多条数据为不同的值，可能很多人会这样写：</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<DIV class=codetitle 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 640px; BACKGROUND: rgb(242,246,251); WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 3px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 3px auto 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><SPAN 
style="FONT-SIZE: 14px; FLOAT: right; LINE-HEIGHT: 25px"><A 
onclick="doCopy('code423')" id=copybut423 class=copybut 
style="CURSOR: pointer; TEXT-DECORATION: none; COLOR: rgb(51,51,51)" 
data="423"><U>复制代码</U></A></SPAN>代码如下:</DIV>
<DIV id=code423 class=codebody 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 638px; BACKGROUND: rgb(221,237,251); WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(0,153,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 5px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px auto 3px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><BR>foreach 
($display_order as $id =&gt; $ordinal) 
{<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp; $sql = "UPDATE categories SET 
display_order = $ordinal WHERE id = 
$id";<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp; 
mysql_query($sql);<SPAN>&nbsp;</SPAN><BR>}<BR></DIV>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>即是循环一条一条的更新记录。一条记录update一次，这样性能很差，也很容易造成阻塞。</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>那么能不能一条sql语句实现批量更新呢？mysql并没有提供直接的方法来实现批量更新，但是可以用点小技巧来实现。</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<DIV class=codetitle 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 640px; BACKGROUND: rgb(242,246,251); WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 3px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 3px auto 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><SPAN 
style="FONT-SIZE: 14px; FLOAT: right; LINE-HEIGHT: 25px"><A 
onclick="doCopy('code39944')" id=copybut39944 class=copybut 
style="CURSOR: pointer; TEXT-DECORATION: none; COLOR: rgb(51,51,51)" 
data="39944"><U>复制代码</U></A></SPAN>代码如下:</DIV>
<DIV id=code39944 class=codebody 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 638px; BACKGROUND: rgb(221,237,251); WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(0,153,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 5px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px auto 3px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><BR>UPDATE 
mytable<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp; SET myfield = CASE 
id<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHEN 1 THEN 
'value'<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHEN 2 THEN 
'value'<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHEN 3 THEN 
'value'<BR>&nbsp;&nbsp;&nbsp; END<BR>WHERE id IN (1,2,3)<BR></DIV>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>这里使用了case 
when 这个小技巧来实现批量更新。<BR>举个例子：</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<DIV class=codetitle 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 640px; BACKGROUND: rgb(242,246,251); WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 3px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 3px auto 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><SPAN 
style="FONT-SIZE: 14px; FLOAT: right; LINE-HEIGHT: 25px"><A 
onclick="doCopy('code21381')" id=copybut21381 class=copybut 
style="CURSOR: pointer; TEXT-DECORATION: none; COLOR: rgb(51,51,51)" 
data="21381"><U>复制代码</U></A></SPAN>代码如下:</DIV>
<DIV id=code21381 class=codebody 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 638px; BACKGROUND: rgb(221,237,251); WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(0,153,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 5px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px auto 3px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><BR>UPDATE 
categories<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp; SET display_order = CASE 
id<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHEN 1 THEN 
3<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHEN 2 THEN 
4<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHEN 3 THEN 
5<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp; END<BR>WHERE id IN (1,2,3)<BR></DIV>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>这句sql的意思是，更新display_order 
字段，如果id=1 则display_order 的值为3，如果id=2 则 display_order 的值为4，如果id=3 则 display_order 
的值为5。<BR>即是将条件语句写在了一起。<BR>这里的where部分不影响代码的执行，但是会提高sql执行的效率。确保sql语句仅执行需要修改的行数，这里只有3条数据进行更新，而where子句确保只有3行数据执行。</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>如果更新多个值的话，只需要稍加修改：</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<DIV class=codetitle 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 640px; BACKGROUND: rgb(242,246,251); WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 3px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 3px auto 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><SPAN 
style="FONT-SIZE: 14px; FLOAT: right; LINE-HEIGHT: 25px"><A 
onclick="doCopy('code3627')" id=copybut3627 class=copybut 
style="CURSOR: pointer; TEXT-DECORATION: none; COLOR: rgb(51,51,51)" 
data="3627"><U>复制代码</U></A></SPAN>代码如下:</DIV>
<DIV id=code3627 class=codebody 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 638px; BACKGROUND: rgb(221,237,251); WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(0,153,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 5px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px auto 3px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><BR>UPDATE 
categories<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp; SET display_order = CASE 
id<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHEN 1 THEN 
3<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHEN 2 THEN 
4<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHEN 3 THEN 
5<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp; 
END,<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp; title = CASE 
id<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHEN 1 THEN 
'New Title 1'<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHEN 2 THEN 'New 
Title 2'<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WHEN 3 THEN 'New Title 
3'<BR>&nbsp;&nbsp;&nbsp; END<BR>WHERE id IN (1,2,3)<BR></DIV>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>到这里，已经完成一条mysql语句更新多条记录了。<BR>但是要在业务中运用，需要结合服务端语言，这里以php为例，构造这条mysql语句：</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<DIV class=codetitle 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 640px; BACKGROUND: rgb(242,246,251); WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 3px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 3px auto 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><SPAN 
style="FONT-SIZE: 14px; FLOAT: right; LINE-HEIGHT: 25px"><A 
onclick="doCopy('code30330')" id=copybut30330 class=copybut 
style="CURSOR: pointer; TEXT-DECORATION: none; COLOR: rgb(51,51,51)" 
data="30330"><U>复制代码</U></A></SPAN>代码如下:</DIV>
<DIV id=code30330 class=codebody 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 638px; BACKGROUND: rgb(221,237,251); WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(0,153,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 5px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px auto 3px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><BR>$display_order 
= array(<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp; 1 =&gt; 
4,<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp; 2 =&gt; 
1,<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp; 3 =&gt; 
2,<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp; 4 =&gt; 
3,<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp; 5 =&gt; 
9,<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp; 6 =&gt; 
5,<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp; 7 =&gt; 
8,<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp; 8 =&gt; 
9<SPAN>&nbsp;</SPAN><BR>);<SPAN>&nbsp;</SPAN><BR>$ids = implode(',', 
array_keys($display_order));<SPAN>&nbsp;</SPAN><BR>$sql = "UPDATE categories SET 
display_order = CASE id ";<SPAN>&nbsp;</SPAN><BR>foreach ($display_order as $id 
=&gt; $ordinal) {<SPAN>&nbsp;</SPAN><BR>&nbsp;&nbsp;&nbsp; $sql .= sprintf("WHEN 
%d THEN %d ", $id, $ordinal);<SPAN>&nbsp;</SPAN><BR>}<SPAN>&nbsp;</SPAN><BR>$sql 
.= "END WHERE id IN ($ids)";<SPAN>&nbsp;</SPAN><BR>echo $sql;<BR></DIV>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>这个例子，有8条记录进行更新。代码也很容易理解，你学会了吗</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>性能分析</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>当我使用上万条记录利用mysql批量更新，发现使用最原始的批量update发现性能很差，将网上看到的总结一下一共有以下三种办法：</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>1.批量update，一条记录update一次，性能很差</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<DIV class=codetitle 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 640px; BACKGROUND: rgb(242,246,251); WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 3px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 3px auto 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><SPAN 
style="FONT-SIZE: 14px; FLOAT: right; LINE-HEIGHT: 25px"><A 
onclick="doCopy('code50220')" id=copybut50220 class=copybut 
style="CURSOR: pointer; TEXT-DECORATION: none; COLOR: rgb(51,51,51)" 
data="50220"><U>复制代码</U></A></SPAN>代码如下:</DIV>
<DIV id=code50220 class=codebody 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 638px; BACKGROUND: rgb(221,237,251); WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(0,153,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 5px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px auto 3px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><BR>update 
test_tbl set dr='2' where id=1;<BR></DIV>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>2.replace 
into 或者insert into ...on duplicate key update</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<DIV class=codetitle 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 640px; BACKGROUND: rgb(242,246,251); WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 3px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 3px auto 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><SPAN 
style="FONT-SIZE: 14px; FLOAT: right; LINE-HEIGHT: 25px"><A 
onclick="doCopy('code17108')" id=copybut17108 class=copybut 
style="CURSOR: pointer; TEXT-DECORATION: none; COLOR: rgb(51,51,51)" 
data="17108"><U>复制代码</U></A></SPAN>代码如下:</DIV>
<DIV id=code17108 class=codebody 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 638px; BACKGROUND: rgb(221,237,251); WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(0,153,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 5px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px auto 3px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><BR>replace 
into test_tbl (id,dr) values (1,'2'),(2,'3'),...(x,'y');<BR></DIV>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>或者使用</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<DIV class=codetitle 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 640px; BACKGROUND: rgb(242,246,251); WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 3px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 3px auto 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><SPAN 
style="FONT-SIZE: 14px; FLOAT: right; LINE-HEIGHT: 25px"><A 
onclick="doCopy('code16445')" id=copybut16445 class=copybut 
style="CURSOR: pointer; TEXT-DECORATION: none; COLOR: rgb(51,51,51)" 
data="16445"><U>复制代码</U></A></SPAN>代码如下:</DIV>
<DIV id=code16445 class=codebody 
style='FONT-SIZE: 14px; BORDER-TOP: rgb(0,153,204) 1px solid; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; BORDER-RIGHT: rgb(0,153,204) 1px solid; WIDTH: 638px; BACKGROUND: rgb(221,237,251); WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(0,153,204) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 5px; CLEAR: both; BORDER-LEFT: rgb(0,153,204) 1px solid; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px auto 3px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 25px; PADDING-RIGHT: 3px; TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'><BR>insert 
into test_tbl (id,dr) values&nbsp; (1,'2'),(2,'3'),...(x,'y') on duplicate key 
update dr=values(dr);<BR></DIV>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'></P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>3.创建临时表，先更新临时表，然后从临时表中update</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>&nbsp;代码如下 
复制代码<SPAN>&nbsp;</SPAN><BR>create temporary table tmp(id int(4) primary key,dr 
varchar(50));<BR>insert into tmp values&nbsp; (0,'gone'), 
(1,'xx'),...(m,'yy');<BR>update test_tbl, tmp set test_tbl.dr=tmp.dr where 
test_tbl.id=tmp.id;</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>注意：这种方法需要用户有temporary 
表的create 权限。</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>下面是上述方法update 
100000条数据的性能测试结果：</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>逐条update</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>real&nbsp;&nbsp;&nbsp; 
0m15.557s<BR>user&nbsp;&nbsp;&nbsp; 0m1.684s<BR>sys&nbsp;&nbsp;&nbsp; 
0m1.372s</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>replace 
into<BR>real&nbsp;&nbsp;&nbsp; 0m1.394s<BR>user&nbsp;&nbsp;&nbsp; 
0m0.060s<BR>sys&nbsp;&nbsp;&nbsp; 0m0.012s</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>insert 
into on duplicate key update<BR>real&nbsp;&nbsp;&nbsp; 
0m1.474s<BR>user&nbsp;&nbsp;&nbsp; 0m0.052s<BR>sys&nbsp;&nbsp;&nbsp; 
0m0.008s</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>create 
temporary table and update:<BR>real&nbsp;&nbsp;&nbsp; 
0m0.643s<BR>user&nbsp;&nbsp;&nbsp; 0m0.064s<BR>sys&nbsp;&nbsp;&nbsp; 
0m0.004s</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>就测试结果来看，测试当时使用replace 
into性能较好。</P>
<P 
style='FONT-SIZE: 14px; FONT-FAMILY: tahoma, arial, "Microsoft YaHei"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(34,34,34); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 5px; FONT-STYLE: normal; TEXT-ALIGN: left; PADDING-TOP: 5px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; LINE-HEIGHT: 30px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; font-variant-ligatures: normal; font-variant-caps: normal; text-decoration-style: initial; text-decoration-color: initial'>replace 
into&nbsp; 和insert into on duplicate key update的不同在于：<BR>replace 
into　操作本质是对重复的记录先delete 后insert，如果更新的字段不全会将缺失的字段置为缺省值<BR>insert into 
则是只update重复记录，不会改变其它字段。</P>
<P>&nbsp;</P>
</BODY>
</HTML>
