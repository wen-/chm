<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=gb2312">
<META name="GENERATOR" content="QuickCHM">
<TITLE>webstorm集成grunt</TITLE>
</HEAD>
<BODY>
<P>webstorm集成grunt</P>
<P><STRONG>1、npm install -g grunt-cli</STRONG>   </P>
<P><STRONG>2、在项目根目录写入Gruntfile.js\package.json 
两个文件</STRONG></P>
<P><STRONG>3、打开webstorm设置</STRONG></P>
<P><IMG hspace=6 src="images/grunt1.png" align=baseline></P>
<P><IMG src="images/grunt2.png" align=baseline></P>
<P><STRONG>4、执行监听</STRONG></P>
<P><IMG src="images/grunt3.png" align=baseline></P>
<P><IMG src="images/grunt4.png" align=baseline></P>
<P><STRONG>5、Gruntfile.js模板</STRONG></P><PRE style="FONT-SIZE: 10.5pt; FONT-FAMILY: '宋体'; COLOR: #ffffff; BACKGROUND-COLOR: #282525"><SPAN style="FONT-WEIGHT: bold">module</SPAN>.<SPAN style="COLOR: #95c995; FONT-STYLE: italic">exports </SPAN>= <SPAN style="FONT-WEIGHT: bold; COLOR: #99ffdd">function</SPAN>(<SPAN style="COLOR: #99ff99">grunt</SPAN>) {<BR>   <SPAN style="COLOR: #808080; FONT-STYLE: italic">// Project configuration.<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">   </SPAN><SPAN style="COLOR: #99ff99">grunt</SPAN>.initConfig({<BR>      <SPAN style="COLOR: #808080; FONT-STYLE: italic">//获取package.json的内容  <BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">      </SPAN><SPAN style="FONT-WEIGHT: bold">pkg</SPAN>: <SPAN style="COLOR: #99ff99">grunt</SPAN>.<SPAN style="FONT-WEIGHT: bold">file</SPAN>.<SPAN style="COLOR: #95c995; FONT-STYLE: italic">readJSON</SPAN>(<SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'package.json'</SPAN>),<BR>      <SPAN style="COLOR: #808080; FONT-STYLE: italic">//js压缩参数配置<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">      </SPAN><SPAN style="FONT-WEIGHT: bold">uglify</SPAN>: {<BR>         <SPAN style="FONT-WEIGHT: bold">options</SPAN>: {<BR>            <SPAN style="FONT-WEIGHT: bold">banner</SPAN>: <SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'/*! &lt;%= pkg.name %&gt; &lt;%= grunt.template.today("yyyy-mm-dd") %&gt; */</SPAN><SPAN style="FONT-WEIGHT: bold; COLOR: #66ccff">\n</SPAN><SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'</SPAN><SPAN style="COLOR: #ccffff"><BR></SPAN><SPAN style="COLOR: #ccffff">         </SPAN>},<BR>         <SPAN style="FONT-WEIGHT: bold">build</SPAN>: {<BR>            <SPAN style="COLOR: #808080; FONT-STYLE: italic">//单个文件写法<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">            //src: 'src/&lt;%= pkg.name %&gt;.js',<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">            //dest: 'build/&lt;%= pkg.name %&gt;.min.js'<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">            //单个文件另一种写法<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">            //files:{<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">            // 'src/abc.min.js':['src/abc.js']<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">            //}<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">            //多文件写法<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">            </SPAN><SPAN style="FONT-WEIGHT: bold">files</SPAN>: [{<BR>               <SPAN style="FONT-WEIGHT: bold">expand</SPAN>: <SPAN style="FONT-WEIGHT: bold; COLOR: #99ffdd">true</SPAN>,<BR>               <SPAN style="FONT-WEIGHT: bold">cwd</SPAN>: <SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'管理后台页面/js'</SPAN>,<SPAN style="COLOR: #808080; FONT-STYLE: italic">//输入目录<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">               </SPAN><SPAN style="FONT-WEIGHT: bold">src</SPAN>: <SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'*.js'</SPAN>,<SPAN style="COLOR: #808080; FONT-STYLE: italic">//输入目录所有文件<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">               </SPAN><SPAN style="FONT-WEIGHT: bold">dest</SPAN>: <SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'build/js'</SPAN>,<SPAN style="COLOR: #808080; FONT-STYLE: italic">//输出目录<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">               //ext: '.min.js'//后缀<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">            </SPAN>}]<BR>         }<BR>      },<BR>      <SPAN style="COLOR: #808080; FONT-STYLE: italic">//css3加前缀<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">      </SPAN><SPAN style="FONT-WEIGHT: bold">autoprefixer</SPAN>: {<BR>         <SPAN style="FONT-WEIGHT: bold">options</SPAN>: {<BR>            <SPAN style="FONT-WEIGHT: bold">browsers</SPAN>: [<SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'last 20 versions'</SPAN>, <SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'ie 9'</SPAN>],<BR>            <SPAN style="COLOR: #808080; FONT-STYLE: italic">//browsers: ['opera 12', 'ff 15', 'chrome 25']<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">         </SPAN>},<BR>         <SPAN style="COLOR: #808080; FONT-STYLE: italic">//单个文件写法<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">         /*single_file: {<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">                src: 'css/a.css',<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">                dest: 'autoprefixer/a.css'<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">            }*/<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">         //多文件写法<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">         </SPAN><SPAN style="FONT-WEIGHT: bold">multiple_files</SPAN>: {<BR>                <SPAN style="FONT-WEIGHT: bold">expand</SPAN>: <SPAN style="FONT-WEIGHT: bold; COLOR: #99ffdd">true</SPAN>,<BR>                <SPAN style="FONT-WEIGHT: bold">flatten</SPAN>: <SPAN style="FONT-WEIGHT: bold; COLOR: #99ffdd">true</SPAN>,<BR>                <SPAN style="FONT-WEIGHT: bold">src</SPAN>: <SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'管理后台页面/css/*.css'</SPAN>,<BR>                <SPAN style="FONT-WEIGHT: bold">dest</SPAN>: <SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'autoprefixer/'</SPAN><SPAN style="COLOR: #ccffff"><BR></SPAN><SPAN style="COLOR: #ccffff">            </SPAN>}<BR>      },<BR>      <SPAN style="COLOR: #808080; FONT-STYLE: italic">//css压缩<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">      </SPAN><SPAN style="FONT-WEIGHT: bold">cssmin</SPAN>: {<BR>         <SPAN style="FONT-WEIGHT: bold">target</SPAN>: {<BR>            <SPAN style="FONT-WEIGHT: bold">files</SPAN>: [{<BR>               <SPAN style="FONT-WEIGHT: bold">expand</SPAN>: <SPAN style="FONT-WEIGHT: bold; COLOR: #99ffdd">true</SPAN>,<BR>               <SPAN style="FONT-WEIGHT: bold">cwd</SPAN>: <SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'autoprefixer'</SPAN>,<BR>               <SPAN style="FONT-WEIGHT: bold">src</SPAN>: [<SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'*.css'</SPAN>, <SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'!*.min.css'</SPAN>],<SPAN style="COLOR: #808080; FONT-STYLE: italic">//不包含.min.css后缀的文件<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">               </SPAN><SPAN style="FONT-WEIGHT: bold">dest</SPAN>: <SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'build/css'</SPAN>,<BR>               <SPAN style="FONT-WEIGHT: bold">ext</SPAN>: <SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'.min.css'</SPAN><SPAN style="COLOR: #ccffff"><BR></SPAN><SPAN style="COLOR: #ccffff">            </SPAN>}]<BR>         }<BR>      },<BR>      <SPAN style="COLOR: #808080; FONT-STYLE: italic">//文件改动监听<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">      </SPAN><SPAN style="FONT-WEIGHT: bold">watch</SPAN>: {  <SPAN style="COLOR: #808080; FONT-STYLE: italic">// grunt-contrib-watch的事务定义<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">         </SPAN><SPAN style="FONT-WEIGHT: bold">all</SPAN>: {<BR>            <SPAN style="FONT-WEIGHT: bold">files</SPAN>: [<SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'管理后台页面/css/*.css'</SPAN>,<SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'管理后台页面/js/*.js'</SPAN>],<BR>            <SPAN style="FONT-WEIGHT: bold">tasks</SPAN>: [<SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'newer:uglify'</SPAN>,<SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'newer:autoprefixer'</SPAN>,<SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'newer:cssmin'</SPAN>],<BR>            <SPAN style="FONT-WEIGHT: bold">options</SPAN>: {<BR>               <SPAN style="FONT-WEIGHT: bold">debounceDelay</SPAN>: <SPAN style="COLOR: #6666d9">250<BR></SPAN><SPAN style="COLOR: #6666d9">            </SPAN>}<BR>         }<BR>      }<BR>   });<BR><BR>   <SPAN style="COLOR: #808080; FONT-STYLE: italic">// 告诉grunt要使用哪些包.<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">   </SPAN><SPAN style="COLOR: #99ff99">grunt</SPAN>.<SPAN style="COLOR: #95c995; FONT-STYLE: italic">loadNpmTasks</SPAN>(<SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'grunt-contrib-uglify'</SPAN>);<SPAN style="COLOR: #808080; FONT-STYLE: italic">//js压缩<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">   </SPAN><SPAN style="COLOR: #99ff99">grunt</SPAN>.<SPAN style="COLOR: #95c995; FONT-STYLE: italic">loadNpmTasks</SPAN>(<SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'grunt-autoprefixer'</SPAN>);<SPAN style="COLOR: #808080; FONT-STYLE: italic">//css3加前缀<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">   </SPAN><SPAN style="COLOR: #99ff99">grunt</SPAN>.<SPAN style="COLOR: #95c995; FONT-STYLE: italic">loadNpmTasks</SPAN>(<SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'grunt-contrib-cssmin'</SPAN>);<SPAN style="COLOR: #808080; FONT-STYLE: italic">//css压缩<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">   </SPAN><SPAN style="COLOR: #99ff99">grunt</SPAN>.<SPAN style="COLOR: #95c995; FONT-STYLE: italic">loadNpmTasks</SPAN>(<SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'grunt-contrib-watch'</SPAN>);<SPAN style="COLOR: #808080; FONT-STYLE: italic">//文件变动监听（作用是实现我们一开始需求的“自动化”！是最重要的一个插件之一！它会监听需要处理的文件的变动，一旦有变动就会自动执行相应处理。但是它有一个问题，就是每当监听到一处变动时，就会大费周章地把所有被监听的文件都处理一遍；）<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">   </SPAN><SPAN style="COLOR: #99ff99">grunt</SPAN>.<SPAN style="COLOR: #95c995; FONT-STYLE: italic">loadNpmTasks</SPAN>(<SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'grunt-newer'</SPAN>);<SPAN style="COLOR: #808080; FONT-STYLE: italic">//只执行变动的文件（作用是处理上方watch的毛病，让watch在监听到某个文件变动时，仅仅对变动的文件进行事务处理）<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">   // 在命令行输入grunt时做些什么（注意顺序）.<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">   //grunt.registerTask('default', ['uglify','autoprefixer','cssmin']);<BR></SPAN><SPAN style="COLOR: #808080; FONT-STYLE: italic">   </SPAN><SPAN style="COLOR: #99ff99">grunt</SPAN>.<SPAN style="COLOR: #95c995; FONT-STYLE: italic">registerTask</SPAN>(<SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'default'</SPAN>, [<SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'newer:uglify'</SPAN>,<SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'newer:autoprefixer'</SPAN>,<SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'newer:cssmin'</SPAN>,<SPAN style="COLOR: #ccffff; BACKGROUND-COLOR: #333333">'watch'</SPAN>]);<BR>};</PRE>
<P><STRONG>6、package.json模板</STRONG></P><PRE style="FONT-SIZE: 10.5pt; FONT-FAMILY: '宋体'; COLOR: #ffffff; BACKGROUND-COLOR: #282525">{<BR>  <SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"name"</SPAN>: <SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"auto_grunt"</SPAN>,<BR>  <SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"version"</SPAN>: <SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"0.1.0"</SPAN>,<BR>  <SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"devDependencies"</SPAN>: {<BR>    <SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"grunt"</SPAN>: <SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"^1.0.0"</SPAN>,<BR>    <SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"grunt-contrib-uglify"</SPAN>: <SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"^1.0.1"</SPAN>,<BR>    <SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"grunt-autoprefixer"</SPAN>: <SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"^3.0.4"</SPAN>,<BR>    <SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"grunt-contrib-cssmin"</SPAN>: <SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"^1.0.1"</SPAN>,<BR>    <SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"grunt-contrib-clean"</SPAN>:<SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"*"</SPAN>,<BR>    <SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"grunt-contrib-concat"</SPAN>:<SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"*"</SPAN>,<BR>    <SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"grunt-contrib-copy"</SPAN>:<SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"*"</SPAN>,<BR>    <SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"grunt-contrib-watch"</SPAN>:<SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"*"</SPAN>,<BR>    <SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"grunt-newer"</SPAN>:<SPAN style="FONT-WEIGHT: bold; COLOR: #008000">"*"<BR></SPAN><SPAN style="FONT-WEIGHT: bold; COLOR: #008000">  </SPAN>}<BR>}</PRE>
</BODY>
</HTML>
