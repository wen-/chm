<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=gb2312">
<META name="GENERATOR" content="QuickCHM">
<TITLE>安卓读取BuildConfig类配置</TITLE>
</HEAD>
<BODY>
<P>安卓读取BuildConfig类配置</P><PRE style="FONT-SIZE: 12pt; FONT-FAMILY: 'Courier New'; COLOR: #a9b7c6; BACKGROUND-COLOR: #2b2b2b"><SPAN style="COLOR: #629755; FONT-STYLE: italic">/**<BR></SPAN><SPAN style="COLOR: #629755; FONT-STYLE: italic">    * </SPAN><SPAN style="FONT-FAMILY: '宋体'; COLOR: #629755; FONT-STYLE: italic">读取配置<BR></SPAN><SPAN style="FONT-FAMILY: '宋体'; COLOR: #629755; FONT-STYLE: italic">    </SPAN><SPAN style="COLOR: #629755; FONT-STYLE: italic">*/<BR></SPAN><SPAN style="COLOR: #629755; FONT-STYLE: italic">   </SPAN><SPAN style="COLOR: #cc7832">public static  </SPAN>WritableMap <SPAN style="COLOR: #ffc66d">config</SPAN>() {<BR>    BuildConfig config = <SPAN style="COLOR: #cc7832">new </SPAN>BuildConfig()<SPAN style="COLOR: #cc7832">;<BR></SPAN><SPAN style="COLOR: #cc7832">    return </SPAN><SPAN style="FONT-STYLE: italic">getConfig</SPAN>(config)<SPAN style="COLOR: #cc7832">;<BR></SPAN><SPAN style="COLOR: #cc7832">   </SPAN>}<BR><BR><SPAN style="COLOR: #cc7832">public static </SPAN>WritableMap <SPAN style="COLOR: #ffc66d">getConfig</SPAN>(Object obj){<BR>   WritableMap msg = Arguments.<SPAN style="FONT-STYLE: italic">createMap</SPAN>()<SPAN style="COLOR: #cc7832">;<BR></SPAN><SPAN style="COLOR: #cc7832">   </SPAN>Field[] fields = obj.getClass().getDeclaredFields()<SPAN style="COLOR: #cc7832">;<BR></SPAN><SPAN style="COLOR: #cc7832">   for </SPAN>(Field field:fields) {<BR>      String name = field.getName()<SPAN style="COLOR: #cc7832">;<BR></SPAN><SPAN style="COLOR: #cc7832">      </SPAN>Object val<SPAN style="COLOR: #cc7832">;<BR></SPAN><SPAN style="COLOR: #cc7832">      try </SPAN>{<BR>         <SPAN style="COLOR: #808080">// </SPAN><SPAN style="FONT-FAMILY: '宋体'; COLOR: #808080">获取原来的访问控制权限<BR></SPAN><SPAN style="FONT-FAMILY: '宋体'; COLOR: #808080">         </SPAN><SPAN style="COLOR: #cc7832">boolean </SPAN>accessFlag = field.isAccessible()<SPAN style="COLOR: #cc7832">;<BR></SPAN><SPAN style="COLOR: #cc7832">         </SPAN><SPAN style="COLOR: #808080">// </SPAN><SPAN style="FONT-FAMILY: '宋体'; COLOR: #808080">修改访问控制权限<BR></SPAN><SPAN style="FONT-FAMILY: '宋体'; COLOR: #808080">         </SPAN>field.setAccessible(<SPAN style="COLOR: #cc7832">true</SPAN>)<SPAN style="COLOR: #cc7832">;<BR></SPAN><SPAN style="COLOR: #cc7832">         try</SPAN>{<BR>            val = field.get(obj)<SPAN style="COLOR: #cc7832">;<BR></SPAN><SPAN style="COLOR: #cc7832">            </SPAN>msg.putString(name<SPAN style="COLOR: #cc7832">,</SPAN>val.toString())<SPAN style="COLOR: #cc7832">;<BR></SPAN><SPAN style="COLOR: #cc7832">         </SPAN>}<SPAN style="COLOR: #cc7832">catch </SPAN>(IllegalAccessException e){<BR>            e.printStackTrace()<SPAN style="COLOR: #cc7832">;<BR></SPAN><SPAN style="COLOR: #cc7832">         </SPAN>}<BR>         <SPAN style="COLOR: #808080">// </SPAN><SPAN style="FONT-FAMILY: '宋体'; COLOR: #808080">恢复访问控制权限<BR></SPAN><SPAN style="FONT-FAMILY: '宋体'; COLOR: #808080">         </SPAN>field.setAccessible(accessFlag)<SPAN style="COLOR: #cc7832">;<BR></SPAN><SPAN style="COLOR: #cc7832">      </SPAN>}<SPAN style="COLOR: #cc7832">catch </SPAN>(IllegalArgumentException ex){<BR>         ex.printStackTrace()<SPAN style="COLOR: #cc7832">;<BR></SPAN><SPAN style="COLOR: #cc7832">      </SPAN>}<BR>   }<BR>   <SPAN style="COLOR: #cc7832">return </SPAN>msg<SPAN style="COLOR: #cc7832">;<BR></SPAN>}</PRE><PRE style="FONT-SIZE: 12pt; FONT-FAMILY: 'Courier New'; COLOR: #a9b7c6; BACKGROUND-COLOR: #2b2b2b"><SPAN style="COLOR: #629755; FONT-STYLE: italic">/**<BR></SPAN><SPAN style="COLOR: #629755; FONT-STYLE: italic"> * </SPAN><SPAN style="FONT-FAMILY: '宋体'; COLOR: #629755; FONT-STYLE: italic">获取配置<BR></SPAN><SPAN style="FONT-FAMILY: '宋体'; COLOR: #629755; FONT-STYLE: italic"> </SPAN><SPAN style="COLOR: #629755; FONT-STYLE: italic">*/<BR></SPAN><SPAN style="COLOR: #bbb529">@ReactMethod<BR></SPAN><SPAN style="COLOR: #cc7832">public void </SPAN><SPAN style="COLOR: #ffc66d">config</SPAN>(Callback callback) {<BR>   WritableMap msg = SplashScreen.<SPAN style="FONT-STYLE: italic">config</SPAN>()<SPAN style="COLOR: #cc7832">;<BR></SPAN><SPAN style="COLOR: #cc7832">   </SPAN>callback.invoke(msg)<SPAN style="COLOR: #cc7832">;<BR></SPAN>}</PRE>
<P>WritableMap类型数据RN会自动转换</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
</BODY>
</HTML>
