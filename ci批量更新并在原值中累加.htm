<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=gb2312">
<META name="GENERATOR" content="QuickCHM">
<TITLE>ci批量更新并在原值中累加</TITLE>
</HEAD>
<BODY>
<P>ci批量更新并在原值中累加</P>
<P>$更新数组 = array(</P>
<P>array = (</P>
<P>'用户编号'=&gt;1,</P>
<P>'xx'=&gt;xx</P>
<P>)...</P>
<P>)</P><PRE style="FONT-SIZE: 10.5pt; FONT-FAMILY: 'Source Code Pro Semibold'; COLOR: #ffffff; BACKGROUND-COLOR: #282525"><SPAN style="COLOR: #1aa642">$</SPAN><SPAN style="FONT-FAMILY: '宋体'; COLOR: #1aa642">更新数 </SPAN>= <SPAN style="COLOR: #1aa642">$this</SPAN>-&gt;<SPAN style="FONT-WEIGHT: bold; COLOR: #660e7a">db</SPAN>-&gt;<SPAN style="COLOR: #000000">where_in</SPAN>(<SPAN style="FONT-WEIGHT: bold; COLOR: #63b5e3">"</SPAN><SPAN style="FONT-FAMILY: '宋体'; FONT-WEIGHT: bold; COLOR: #63b5e3">推送编号</SPAN><SPAN style="FONT-WEIGHT: bold; COLOR: #63b5e3">"</SPAN>, [<SPAN style="COLOR: #6666d9">14</SPAN>,<SPAN style="COLOR: #6666d9">15</SPAN>,<SPAN style="COLOR: #6666d9">16</SPAN>,<SPAN style="COLOR: #6666d9">17</SPAN>,<SPAN style="COLOR: #6666d9">18</SPAN>])<BR>   -&gt;<SPAN style="COLOR: #000000">set</SPAN>(<SPAN style="FONT-WEIGHT: bold; COLOR: #63b5e3">"</SPAN><SPAN style="FONT-FAMILY: '宋体'; FONT-WEIGHT: bold; COLOR: #63b5e3">推送成功人数</SPAN><SPAN style="FONT-WEIGHT: bold; COLOR: #63b5e3">"</SPAN>, <SPAN style="FONT-WEIGHT: bold; COLOR: #63b5e3">'</SPAN><SPAN style="FONT-FAMILY: '宋体'; FONT-WEIGHT: bold; COLOR: #63b5e3">推送成功人数</SPAN><SPAN style="FONT-WEIGHT: bold; COLOR: #63b5e3">+'</SPAN>.<SPAN style="FONT-WEIGHT: bold; COLOR: #63b5e3">'2'</SPAN>,<SPAN style="FONT-WEIGHT: bold; COLOR: #88e3c7">false</SPAN>)<BR>   -&gt;<SPAN style="COLOR: #000000">update</SPAN>(<SPAN style="FONT-WEIGHT: bold; COLOR: #63b5e3">"</SPAN><SPAN style="FONT-FAMILY: '宋体'; FONT-WEIGHT: bold; COLOR: #63b5e3">推送记录表</SPAN><SPAN style="FONT-WEIGHT: bold; COLOR: #63b5e3">"</SPAN>);<BR><SPAN style="FONT-WEIGHT: bold; COLOR: #88e3c7">echo </SPAN><SPAN style="COLOR: #1aa642">$</SPAN><SPAN style="FONT-FAMILY: '宋体'; COLOR: #1aa642">更新数</SPAN>;</PRE><PRE style="FONT-SIZE: 10.5pt; FONT-FAMILY: 'Source Code Pro Semibold'; COLOR: #ffffff; BACKGROUND-COLOR: #282525">如果成功：$更新数只会是1</PRE><PRE style="FONT-SIZE: 10.5pt; FONT-FAMILY: 'Source Code Pro Semibold'; COLOR: #ffffff; BACKGROUND-COLOR: #282525">另一种批量更新：</PRE><PRE style="FONT-SIZE: 10.5pt; FONT-FAMILY: 'Source Code Pro Semibold'; COLOR: #ffffff; BACKGROUND-COLOR: #282525"><PRE style="FONT-SIZE: 10.5pt; FONT-FAMILY: 'Source Code Pro Semibold'; COLOR: #ffffff; BACKGROUND-COLOR: #282525"><SPAN style="COLOR: #1aa642">$this</SPAN>-&gt;<SPAN style="FONT-WEIGHT: bold; COLOR: #660e7a">db</SPAN>-&gt;<SPAN style="COLOR: #000000">update_batch</SPAN>(<SPAN style="FONT-WEIGHT: bold; COLOR: #63b5e3">'</SPAN><SPAN style="FONT-FAMILY: '宋体'; FONT-WEIGHT: bold; COLOR: #63b5e3">用户表</SPAN><SPAN style="FONT-WEIGHT: bold; COLOR: #63b5e3">'</SPAN>, <SPAN style="COLOR: #1aa642">$</SPAN><SPAN style="FONT-FAMILY: '宋体'; COLOR: #1aa642">更新用户万能币数组</SPAN>, <SPAN style="FONT-WEIGHT: bold; COLOR: #63b5e3">'</SPAN><SPAN style="FONT-FAMILY: '宋体'; FONT-WEIGHT: bold; COLOR: #63b5e3">用户编号</SPAN><SPAN style="FONT-WEIGHT: bold; COLOR: #63b5e3">'</SPAN>);//无法操作原值</PRE><PRE style="FONT-SIZE: 10.5pt; FONT-FAMILY: 'Source Code Pro Semibold'; COLOR: #ffffff; BACKGROUND-COLOR: #282525"><SPAN style="FONT-FAMILY: '宋体'; COLOR: #1aa642"><PRE style="FONT-SIZE: 10.5pt; FONT-FAMILY: 'Source Code Pro Semibold'; COLOR: #ffffff; BACKGROUND-COLOR: #282525"><SPAN style="FONT-FAMILY: '宋体'; COLOR: #1aa642"><FONT face="Source Code Pro Semibold"></FONT></SPAN>&nbsp;</PRE></SPAN></PRE><PRE style="FONT-SIZE: 10.5pt; FONT-FAMILY: 'Source Code Pro Semibold'; COLOR: #ffffff; BACKGROUND-COLOR: #282525"><SPAN style="FONT-FAMILY: '宋体'; COLOR: #1aa642"></SPAN>&nbsp;</PRE><PRE style="FONT-SIZE: 10.5pt; FONT-FAMILY: 'Source Code Pro Semibold'; COLOR: #ffffff; BACKGROUND-COLOR: #282525"><SPAN style="FONT-FAMILY: '宋体'; COLOR: #1aa642"></SPAN>&nbsp;</PRE><PRE style="FONT-SIZE: 10.5pt; FONT-FAMILY: 'Source Code Pro Semibold'; COLOR: #ffffff; BACKGROUND-COLOR: #282525"><SPAN style="FONT-FAMILY: '宋体'; COLOR: #1aa642"><SPAN style="COLOR: #1aa642"></SPAN>&nbsp;</PRE></SPAN></PRE>
</BODY>
</HTML>
