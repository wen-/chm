<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=gb2312">
<META name="GENERATOR" content="QuickCHM">
<TITLE>react-native安卓物理键返回</TITLE>
</HEAD>
<BODY>
<H1 class=csdn_top 
style='BOX-SIZING: border-box; FONT-SIZE: 24px; FONT-FAMILY: "PingFang SC", "Microsoft YaHei", SimHei, Arial, SimSun; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: rgb(44,48,51); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 29px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; LINE-HEIGHT: 38px; PADDING-RIGHT: 29px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial'>react 
native 之 Android物理返回键</H1>
<DIV class="article_bar clearfix" 
style='BOX-SIZING: border-box; FONT-SIZE: 14px; FONT-FAMILY: "PingFang SC", "Microsoft YaHei", SimHei, Arial, SimSun; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(229,229,229) 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(136,136,136); PADDING-BOTTOM: 8px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 29px; ORPHANS: 2; WIDOWS: 2; MARGIN: 5px 0px 0px; DISPLAY: block; LETTER-SPACING: normal; LINE-HEIGHT: 38px; PADDING-RIGHT: 29px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial'>
<DIV class=artical_tag 
style="BOX-SIZING: border-box; FLOAT: left; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"><SPAN 
class=original 
style="BOX-SIZING: border-box; FONT-SIZE: 14px; BORDER-TOP: rgb(228,235,244) 1px solid; BORDER-RIGHT: rgb(228,235,244) 1px solid; BORDER-BOTTOM: rgb(228,235,244) 1px solid; FONT-WEIGHT: normal; COLOR: rgb(120,144,156); PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 6px; BORDER-LEFT: rgb(228,235,244) 1px solid; MARGIN: 0px 20px 0px 0px; PADDING-RIGHT: 6px">原创<SPAN>&nbsp;</SPAN></SPAN><SPAN 
class=time 
style="BOX-SIZING: border-box; FONT-SIZE: 14px; FONT-WEIGHT: normal; COLOR: rgb(187,187,187); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; DISPLAY: inline-block; PADDING-RIGHT: 0px">2017年01月28日 
22:58:05</SPAN></DIV>
<UL class=right_bar 
style="LIST-STYLE-TYPE: none; BOX-SIZING: border-box; FLOAT: right; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 5px 0px 0px; PADDING-RIGHT: 0px">
  <LI 
  style="LIST-STYLE-TYPE: none; BOX-SIZING: border-box; FLOAT: left; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px 0px 0px 30px; LINE-HEIGHT: 28px; PADDING-RIGHT: 0px"><BUTTON 
  class=btn-noborder 
  style="BOX-SIZING: border-box; FONT-SIZE: 14px; CURSOR: auto; BORDER-TOP: 0px; HEIGHT: 24px; FONT-FAMILY: inherit; BORDER-RIGHT: 0px; BACKGROUND: none transparent scroll repeat 0% 0%; BORDER-BOTTOM: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(136,136,136); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; TEXT-ALIGN: center; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; BORDER-LEFT: 0px; MARGIN: 0px; DISPLAY: inline-block; OUTLINE-COLOR: invert; LINE-HEIGHT: 24px; PADDING-RIGHT: 0px; -webkit-appearance: button"><I 
  class="icon iconfont icon-read" 
  style="BOX-SIZING: border-box; FONT-SIZE: 16px; FONT-FAMILY: iconfont !important; VERTICAL-ALIGN: middle; COLOR: rgb(187,187,187); FONT-STYLE: normal; DISPLAY: inline-block; MARGIN-RIGHT: 8px; -webkit-font-smoothing: antialiased"></I><SPAN 
  class=txt 
  style="BOX-SIZING: border-box; VERTICAL-ALIGN: middle; FONT-WEIGHT: normal; COLOR: rgb(187,187,187); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; DISPLAY: inline-block; PADDING-RIGHT: 0px">1886</SPAN></BUTTON></LI></UL></DIV>
<DIV id=article_content class="article_content csdn-tracking-statistics" 
style='BOX-SIZING: border-box; FONT-SIZE: 16px; OVERFLOW: hidden; FONT-FAMILY: "PingFang SC", "Microsoft YaHei", SimHei, Arial, SimSun; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: normal; COLOR: rgb(69,69,69); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 20px; PADDING-LEFT: 30px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px 0px 30px; LETTER-SPACING: normal; PADDING-RIGHT: 30px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial' 
data-dsm="post" data-mod="popu_519">
<H1 
style='BOX-SIZING: border-box; FONT-SIZE: 2.6em; FONT-FAMILY: "PingFang SC", "Microsoft YaHei", SimHei, Arial, SimSun; FONT-WEIGHT: 100; COLOR: ; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0.8em 0px; LINE-HEIGHT: 1.1; PADDING-RIGHT: 0px'><A 
style="BOX-SIZING: border-box; TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; FONT-WEIGHT: normal; COLOR: rgb(79,161,219); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0px; OUTLINE-COLOR: invert; PADDING-RIGHT: 0px" 
name=t0></A>基本用法</H1>
<P 
style="BOX-SIZING: border-box; WORD-WRAP: break-word; WORD-BREAK: normal; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">根据文档，安卓back键的处理主要就是一个事件监听：</P>
<DIV class=cnblogs_code 
style="BOX-SIZING: border-box; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"><PRE style='BOX-SIZING: border-box; FONT-SIZE: 13px; WORD-WRAP: break-word; BORDER-TOP: rgb(204,204,204) 1px solid; FONT-FAMILY: Monaco, Menlo, Consolas, "Courier New", monospace; BORDER-RIGHT: rgb(204,204,204) 1px solid; WHITE-SPACE: pre-wrap; BORDER-BOTTOM: rgb(204,204,204) 1px solid; WORD-BREAK: break-all; FONT-WEIGHT: normal; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; MARGIN: 0px; DISPLAY: block; LINE-HEIGHT: 1.4285; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(245,245,245); border-radius: 4px'><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">1</SPAN> BackAndroid.addEventListener('hardwareBackPress', <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">this</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">.onBackPressed);
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">2</SPAN> BackAndroid.removeEventListener('hardwareBackPress', <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">this</SPAN>.onBackPressed);</PRE></DIV>
<P 
style="BOX-SIZING: border-box; WORD-WRAP: break-word; WORD-BREAK: normal; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">在starter-kit里，我们在App这一级别，实现了按back键回退导航栈的功能：</P>
<DIV class=cnblogs_code 
style="BOX-SIZING: border-box; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"><PRE style='BOX-SIZING: border-box; FONT-SIZE: 13px; WORD-WRAP: break-word; BORDER-TOP: rgb(204,204,204) 1px solid; FONT-FAMILY: Monaco, Menlo, Consolas, "Courier New", monospace; BORDER-RIGHT: rgb(204,204,204) 1px solid; WHITE-SPACE: pre-wrap; BORDER-BOTTOM: rgb(204,204,204) 1px solid; WORD-BREAK: break-all; FONT-WEIGHT: normal; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; MARGIN: 0px; DISPLAY: block; LINE-HEIGHT: 1.4285; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(245,245,245); border-radius: 4px'><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> 1</SPAN> <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">class App extends React.Component {
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> 2</SPAN> <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">  componentWillMount() {
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> 3</SPAN>     <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">if</SPAN> (Platform.OS === 'android'<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">) {
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> 4</SPAN>       BackAndroid.addEventListener('hardwareBackPress', <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">this</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">.onBackAndroid);
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> 5</SPAN> <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">    }
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> 6</SPAN> <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">  }
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> 7</SPAN> <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">  componentWillUnmount() {
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> 8</SPAN>     <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">if</SPAN> (Platform.OS === 'android'<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">) {
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> 9</SPAN>       BackAndroid.removeEventListener('hardwareBackPress', <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">this</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">.onBackAndroid);
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">10</SPAN> <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">    }
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">11</SPAN> <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">  }
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">12</SPAN>   onBackAndroid = () =&gt;<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> {
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">13</SPAN>     const nav = <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">this</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">.navigator;
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">14</SPAN>     const routers =<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> nav.getCurrentRoutes();
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">15</SPAN>     <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">if</SPAN> (routers.length &gt; 1<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">) {
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">16</SPAN> <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">      nav.pop();
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">17</SPAN>       <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">return</SPAN> <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">true</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">;
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">18</SPAN> <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">    }
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">19</SPAN>     <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">return</SPAN> <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">false</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">;
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">20</SPAN> <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">  };
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">21</SPAN> <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">  ……
</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,128); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">22</SPAN> }</PRE></DIV>
<P 
style="BOX-SIZING: border-box; WORD-WRAP: break-word; WORD-BREAK: normal; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">注意这里为了方便后续removeEventListener，采用了用绑定this的函数属性的方法来创建回调函数，而非箭头函数或者bind(this)，这一点参考之前的博文</P>
<P 
style="BOX-SIZING: border-box; WORD-WRAP: break-word; WORD-BREAK: normal; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">代码中，当componentWillMount的时候挂接事件。对于应用根组件来说，这个生命周期就基本和我们应用的生命周期一致了。当back键被按下的时候，首先检查当前的导航栈，如果多余一个页面，则退回顶部的页面。</P>
<DIV class=cnblogs_code 
style="BOX-SIZING: border-box; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"><PRE style='BOX-SIZING: border-box; FONT-SIZE: 13px; WORD-WRAP: break-word; BORDER-TOP: rgb(204,204,204) 1px solid; FONT-FAMILY: Monaco, Menlo, Consolas, "Courier New", monospace; BORDER-RIGHT: rgb(204,204,204) 1px solid; WHITE-SPACE: pre-wrap; BORDER-BOTTOM: rgb(204,204,204) 1px solid; WORD-BREAK: break-all; FONT-WEIGHT: normal; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; MARGIN: 0px; DISPLAY: block; LINE-HEIGHT: 1.4285; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(245,245,245); border-radius: 4px'>说明：BackAndroid在iOS平台下是一个空实现，所以理论上不做这个Platform.OS === 'android'判断也是安全的。</PRE></DIV>
<H2 
style='BOX-SIZING: border-box; FONT-SIZE: 2.15em; FONT-FAMILY: "PingFang SC", "Microsoft YaHei", SimHei, Arial, SimSun; FONT-WEIGHT: 100; COLOR: ; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0.8em 0px; LINE-HEIGHT: 1.1; PADDING-RIGHT: 0px'><A 
style="BOX-SIZING: border-box; TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; FONT-WEIGHT: normal; COLOR: rgb(79,161,219); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0px; OUTLINE-COLOR: invert; PADDING-RIGHT: 0px" 
name=t1></A>使用默认行为/退出应用</H2>
<P 
style="BOX-SIZING: border-box; WORD-WRAP: break-word; WORD-BREAK: normal; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">back键的默认行为就是退出应用了。我们通常需要判断某些条件，并最后决定是否要退出应用。上文中的例子就使用了第一种调用默认行为的方法：</P>
<H3 
style='BOX-SIZING: border-box; FONT-SIZE: 1.7em; FONT-FAMILY: "PingFang SC", "Microsoft YaHei", SimHei, Arial, SimSun; FONT-WEIGHT: 100; COLOR: ; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0.8em 0px; LINE-HEIGHT: 1.1; PADDING-RIGHT: 0px'><A 
style="BOX-SIZING: border-box; TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; FONT-WEIGHT: normal; COLOR: rgb(79,161,219); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0px; OUTLINE-COLOR: invert; PADDING-RIGHT: 0px" 
name=t2></A>如果所有事件监听函数中，没有任何一个返回真值，就会默认调用默认行为</H3>
<P 
style="BOX-SIZING: border-box; WORD-WRAP: break-word; WORD-BREAK: normal; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">如果你只挂接了一个监听函数，那么你的返回值就决定了是否要调用默认行为：true为<EM 
style="BOX-SIZING: border-box; FONT-STYLE: italic">不调用</EM>，false为<EM 
style="BOX-SIZING: border-box; FONT-STYLE: italic">调用</EM>。</P>
<P 
style="BOX-SIZING: border-box; WORD-WRAP: break-word; WORD-BREAK: normal; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">在上文代码中，我们如果导航栈多于一个页面，就不调用默认行为，而如果只有一个页面，则调用默认界面。</P>
<H4 
style='BOX-SIZING: border-box; FONT-SIZE: 1.25em; FONT-FAMILY: "PingFang SC", "Microsoft YaHei", SimHei, Arial, SimSun; FONT-WEIGHT: 100; COLOR: ; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0.8em 0px; LINE-HEIGHT: 1.1; PADDING-RIGHT: 0px'>例子：“再按一次退出应用”</H4>
<P 
style="BOX-SIZING: border-box; WORD-WRAP: break-word; WORD-BREAK: normal; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">常有这种需求：按下back键以后，弹出一个toast，然后在一定时间内再按一次，才退出应用。这个代码就可以这样写：</P>
<DIV class=cnblogs_code 
style="BOX-SIZING: border-box; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"><PRE style='BOX-SIZING: border-box; FONT-SIZE: 13px; WORD-WRAP: break-word; BORDER-TOP: rgb(204,204,204) 1px solid; FONT-FAMILY: Monaco, Menlo, Consolas, "Courier New", monospace; BORDER-RIGHT: rgb(204,204,204) 1px solid; WHITE-SPACE: pre-wrap; BORDER-BOTTOM: rgb(204,204,204) 1px solid; WORD-BREAK: break-all; FONT-WEIGHT: normal; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; MARGIN: 0px; DISPLAY: block; LINE-HEIGHT: 1.4285; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(245,245,245); border-radius: 4px'>  onBackAndroid = () =&gt;<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> {
    </SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">if</SPAN> (<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">this</SPAN>.lastBackPressed &amp;&amp; <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">this</SPAN>.lastBackPressed + 2000 &gt;=<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> Date.now()) {
      </SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">//</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">最近2秒内按过back键，可以退出应用。</SPAN>
      <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">return</SPAN> <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">false</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">;
    }
    </SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">this</SPAN>.lastBackPressed =<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> Date.now();
    ToastAndroid.show(</SPAN>'再按一次退出应用'<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">);
    </SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">return</SPAN> <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">true</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">;
  };</SPAN></PRE></DIV>
<P 
style="BOX-SIZING: border-box; WORD-WRAP: break-word; WORD-BREAK: normal; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">还有一种情况，我们在监听函数中不能决定是否要调用默认行为，要等待一个异步操作之后才调用默认行为，此时可以通过第二种办法：</P>
<H3 
style='BOX-SIZING: border-box; FONT-SIZE: 1.7em; FONT-FAMILY: "PingFang SC", "Microsoft YaHei", SimHei, Arial, SimSun; FONT-WEIGHT: 100; COLOR: ; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0.8em 0px; LINE-HEIGHT: 1.1; PADDING-RIGHT: 0px'><A 
style="BOX-SIZING: border-box; TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; FONT-WEIGHT: normal; COLOR: rgb(79,161,219); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0px; OUTLINE-COLOR: invert; PADDING-RIGHT: 0px" 
name=t3></A>使用<CODE 
style='BOX-SIZING: border-box; FONT-SIZE: 24px; FONT-FAMILY: Monaco, Menlo, Consolas, "Courier New", monospace; WHITE-SPACE: nowrap; COLOR: rgb(199,37,78); PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; PADDING-RIGHT: 4px; BACKGROUND-COLOR: rgb(249,242,244); border-radius: 4px'>BACKANDROID.EXITAPP()</CODE>来退出应用。</H3>
<H4 
style='BOX-SIZING: border-box; FONT-SIZE: 1.25em; FONT-FAMILY: "PingFang SC", "Microsoft YaHei", SimHei, Arial, SimSun; FONT-WEIGHT: 100; COLOR: ; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0.8em 0px; LINE-HEIGHT: 1.1; PADDING-RIGHT: 0px'>例子：在退出应用之前保存数据</H4>
<P 
style="BOX-SIZING: border-box; WORD-WRAP: break-word; WORD-BREAK: normal; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">写法1：</P>
<DIV class=cnblogs_code 
style="BOX-SIZING: border-box; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"><PRE style='BOX-SIZING: border-box; FONT-SIZE: 13px; WORD-WRAP: break-word; BORDER-TOP: rgb(204,204,204) 1px solid; FONT-FAMILY: Monaco, Menlo, Consolas, "Courier New", monospace; BORDER-RIGHT: rgb(204,204,204) 1px solid; WHITE-SPACE: pre-wrap; BORDER-BOTTOM: rgb(204,204,204) 1px solid; WORD-BREAK: break-all; FONT-WEIGHT: normal; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; MARGIN: 0px; DISPLAY: block; LINE-HEIGHT: 1.4285; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(245,245,245); border-radius: 4px'>  onBackAndroid = () =&gt;<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">{
    saveData().then(()</SPAN>=&gt;<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">{
      BackAndroid.exitApp();
    });
    </SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">return</SPAN> <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">true</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">;
  }</SPAN></PRE></DIV>
<P 
style="BOX-SIZING: border-box; WORD-WRAP: break-word; WORD-BREAK: normal; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">在监听函数中，我们开始异步事件，并直接return 
true。此时默认行为不会被调用。当保存完毕后，我们调用exitApp()，触发默认行为，退出应用。</P>
<P 
style="BOX-SIZING: border-box; WORD-WRAP: break-word; WORD-BREAK: normal; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">写法2：</P>
<DIV class=cnblogs_code 
style="BOX-SIZING: border-box; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"><PRE style='BOX-SIZING: border-box; FONT-SIZE: 13px; WORD-WRAP: break-word; BORDER-TOP: rgb(204,204,204) 1px solid; FONT-FAMILY: Monaco, Menlo, Consolas, "Courier New", monospace; BORDER-RIGHT: rgb(204,204,204) 1px solid; WHITE-SPACE: pre-wrap; BORDER-BOTTOM: rgb(204,204,204) 1px solid; WORD-BREAK: break-all; FONT-WEIGHT: normal; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; MARGIN: 0px; DISPLAY: block; LINE-HEIGHT: 1.4285; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(245,245,245); border-radius: 4px'>  onBackAndroid = async () =&gt;<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">{
    await saveData();
    BackAndroid.exitApp();
  }</SPAN></PRE></DIV>
<P 
style="BOX-SIZING: border-box; WORD-WRAP: break-word; WORD-BREAK: normal; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">这里我们用了async函数，async 
函数总是返回一个Promise，Promise作为一个对象，也被认为是一个“真值”，所以这种情况下默认行为总是不会被调用。当保存完毕后，我们调用exitApp()，触发默认行为，退出应用。</P>
<H2 
style='BOX-SIZING: border-box; FONT-SIZE: 2.15em; FONT-FAMILY: "PingFang SC", "Microsoft YaHei", SimHei, Arial, SimSun; FONT-WEIGHT: 100; COLOR: ; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0.8em 0px; LINE-HEIGHT: 1.1; PADDING-RIGHT: 0px'><A 
style="BOX-SIZING: border-box; TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; FONT-WEIGHT: normal; COLOR: rgb(79,161,219); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0px; OUTLINE-COLOR: invert; PADDING-RIGHT: 0px" 
name=t4></A>根据当前界面决定作何动作</H2>
<P 
style="BOX-SIZING: border-box; WORD-WRAP: break-word; WORD-BREAK: normal; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">有时候我们有这样的需求：当用户处于某些界面下时，back键要做特殊的动作，如：提示用户是否要保存数据，或者解锁界面禁止back键返回等等。此时，最佳实践是在route或route中对应的Component上保存关于如何处理back键的信息：</P>
<P 
style="BOX-SIZING: border-box; WORD-WRAP: break-word; WORD-BREAK: normal; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">&nbsp;</P>
<DIV class=cnblogs_code 
style="BOX-SIZING: border-box; FONT-WEIGHT: normal; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"><PRE style='BOX-SIZING: border-box; FONT-SIZE: 13px; WORD-WRAP: break-word; BORDER-TOP: rgb(204,204,204) 1px solid; FONT-FAMILY: Monaco, Menlo, Consolas, "Courier New", monospace; BORDER-RIGHT: rgb(204,204,204) 1px solid; WHITE-SPACE: pre-wrap; BORDER-BOTTOM: rgb(204,204,204) 1px solid; WORD-BREAK: break-all; FONT-WEIGHT: normal; COLOR: rgb(51,51,51); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: rgb(204,204,204) 1px solid; MARGIN: 0px; DISPLAY: block; LINE-HEIGHT: 1.4285; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(245,245,245); border-radius: 4px'>onBackAndroid = () =&gt;<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> {
    const nav </SPAN>= <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">this</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">.navigator;
    const routers </SPAN>=<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> nav.getCurrentRoutes();
    </SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">if</SPAN> (routers.length &gt; 1<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">) {
      const top </SPAN>= routers[routers.length - 1<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">];
      </SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">if</SPAN> (top.ignoreBack ||<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> top.component.ignoreBack){
        </SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">//</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> 路由或组件上决定这个界面忽略back键</SPAN>
        <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">return</SPAN> <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">true</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">;
      }
      const handleBack </SPAN>= top.handleBack ||<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> top.component.handleBack;
      </SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">if</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> (handleBack) {
        </SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">//</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> 路由或组件上决定这个界面自行处理back键</SPAN>
        <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">return</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> handleBack();
      }
      </SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">//</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,128,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px"> 默认行为： 退出当前界面。</SPAN>
<SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">      nav.pop();
      </SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">return</SPAN> <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">true</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">;
    }
    </SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">return</SPAN> <SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">false</SPAN><SPAN style="BOX-SIZING: border-box; FONT-WEIGHT: normal; COLOR: rgb(0,0,0); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">;
  };</SPAN></PRE></DIV></DIV>
</BODY>
</HTML>
