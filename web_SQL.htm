<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<HTML>
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=gb2312">
<META name="GENERATOR" content="QuickCHM">
<TITLE>web_SQL</TITLE>
</HEAD>
<BODY>
<P>web_SQL</P>
<P>1、打开数据库（没有则创建）；</P><PRE class="prettyprint notranslate prettyprinted" style="BOX-SIZING: border-box; OVERFLOW: auto; BORDER-TOP: rgb(214,214,214) 1px solid; HEIGHT: 28px; BORDER-RIGHT: rgb(214,214,214) 1px solid; WIDTH: 937px; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(214,214,214) 1px solid; TEXT-TRANSFORM: none; COLOR: rgb(49,49,49); PADDING-BOTTOM: 5px; PADDING-TOP: 5px; FONT: 12px/16px Menlo, Monaco, Consolas, 'Courier New', monospace; PADDING-LEFT: 5px; BORDER-LEFT: rgb(214,214,214) 1px solid; WIDOWS: 1; MARGIN: 0px 0px 10px; LETTER-SPACING: normal; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(238,238,238); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; border-radius: 0px"><FONT color=#000000><SPAN class=kwd style="BOX-SIZING: border-box; COLOR: rgb(0,0,136)">var</SPAN><SPAN class=pln style="BOX-SIZING: border-box"> db </SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">=</SPAN><SPAN class=pln style="BOX-SIZING: border-box"> openDatabase</SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">(</SPAN><SPAN class=str style="BOX-SIZING: border-box; COLOR: rgb(0,136,0)">'mydb'</SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">,</SPAN><SPAN class=pln style="BOX-SIZING: border-box"> </SPAN><SPAN class=str style="BOX-SIZING: border-box; COLOR: rgb(0,136,0)">'1.0'</SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">,</SPAN><SPAN class=pln style="BOX-SIZING: border-box"> </SPAN><SPAN class=str style="BOX-SIZING: border-box; COLOR: rgb(0,136,0)">'Test DB'</SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">,</SPAN><SPAN class=pln style="BOX-SIZING: border-box"> </SPAN><SPAN class=lit style="BOX-SIZING: border-box; COLOR: rgb(0,102,102)">2</SPAN><SPAN class=pln style="BOX-SIZING: border-box"> </SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">*</SPAN><SPAN class=pln style="BOX-SIZING: border-box"> </SPAN><SPAN class=lit style="BOX-SIZING: border-box; COLOR: rgb(0,102,102)">1024</SPAN><SPAN class=pln style="BOX-SIZING: border-box"> </SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">*</SPAN><SPAN class=pln style="BOX-SIZING: border-box"> </SPAN><SPAN class=lit style="BOX-SIZING: border-box; COLOR: rgb(0,102,102)">1024</SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">);//(参数说明：1、数据库名；2、版本；3、摘要；4、大小；还有第5个参数是回调)</SPAN></FONT></PRE>
<P>2、执行数据库事务；</P><PRE class="prettyprint notranslate prettyprinted" style="BOX-SIZING: border-box; OVERFLOW: auto; BORDER-TOP: rgb(214,214,214) 1px solid; HEIGHT: 92px; BORDER-RIGHT: rgb(214,214,214) 1px solid; WIDTH: 938px; WORD-SPACING: 0px; BORDER-BOTTOM: rgb(214,214,214) 1px solid; TEXT-TRANSFORM: none; COLOR: rgb(49,49,49); PADDING-BOTTOM: 5px; PADDING-TOP: 5px; FONT: 12px/16px Menlo, Monaco, Consolas, 'Courier New', monospace; PADDING-LEFT: 5px; BORDER-LEFT: rgb(214,214,214) 1px solid; WIDOWS: 1; MARGIN: 0px 0px 10px; LETTER-SPACING: normal; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(238,238,238); TEXT-INDENT: 0px; -webkit-text-stroke-width: 0px; border-radius: 0px"><SPAN class=pln style="BOX-SIZING: border-box">db</SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">.</SPAN><SPAN class=pln style="BOX-SIZING: border-box">transaction</SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">(</SPAN><SPAN class=kwd style="BOX-SIZING: border-box; COLOR: rgb(0,0,136)">function</SPAN><SPAN class=pln style="BOX-SIZING: border-box"> </SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">(</SPAN><SPAN class=pln style="BOX-SIZING: border-box">tx</SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">)</SPAN><SPAN class=pln style="BOX-SIZING: border-box"> </SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">{</SPAN><SPAN class=pln style="BOX-SIZING: border-box">
   tx</SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">.</SPAN><SPAN class=pln style="BOX-SIZING: border-box">executeSql</SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">(</SPAN><SPAN class=str style="BOX-SIZING: border-box; COLOR: rgb(0,136,0)">'CREATE TABLE IF NOT EXISTS LOGS (id unique, log)'</SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">);//创建表LOGS,两列：id和log;  unique唯一</SPAN><SPAN class=pln style="BOX-SIZING: border-box">
   tx</SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">.</SPAN><SPAN class=pln style="BOX-SIZING: border-box">executeSql</SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">(</SPAN><SPAN class=str style="BOX-SIZING: border-box; COLOR: rgb(0,136,0)">'INSERT INTO LOGS (id, log) VALUES (1, "foobar")'</SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">);//插入数据</SPAN><SPAN class=pln style="BOX-SIZING: border-box">
   tx</SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">.</SPAN><SPAN class=pln style="BOX-SIZING: border-box">executeSql</SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">(</SPAN><SPAN class=str style="BOX-SIZING: border-box; COLOR: rgb(0,136,0)">'INSERT INTO LOGS (id, log) VALUES (2, "logmsg")'</SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">);//插入数据</SPAN><SPAN class=pln style="BOX-SIZING: border-box">
</SPAN><SPAN class=pun style="BOX-SIZING: border-box; COLOR: rgb(102,102,0)">});</SPAN></PRE>
<P>插入列：（<FONT color=#ff0000>无法删除列）</FONT></P>
<P>db.transaction(function(tx){tx.executeSql('alter table LOGS add age');})</P>
<P>删除行：</P>
<P>db.transaction(function(tx){tx.executeSql('delete from LOGS where 
id=1');})</P>
<P>更新数据：</P>
<P>db.transaction(function(tx){tx.executeSql('update LOGS set age="10" where 
id=1');})</P>
<P>查询数据：</P>db.transaction(function(tx){tx.executeSql('select * from LOGS', [], 
function (tx, results) {console.log(results)});})
<P>删除表：<FONT color=#ff0000>（无法删除库）</FONT></P>
<P>db.transaction(function(tx){tx.executeSql('drop TABLE 
LOGS');})</P>
</BODY>
</HTML>
